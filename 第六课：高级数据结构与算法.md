# ç¬¬å…­è¯¾ï¼šé«˜çº§æ•°æ®ç»“æ„ä¸ç®—æ³•

**é¢„è®¡æ—¶é•¿ï¼š200åˆ†é’Ÿ**
 **éš¾åº¦ç­‰çº§ï¼šâ­â­â­â­**

------

## ğŸ“š è¯¾ç¨‹ç›®å½•

1. [æ•°æ®ç»“æ„åŸºç¡€å›é¡¾](#51-æ•°æ®ç»“æ„åŸºç¡€å›é¡¾-25åˆ†é’Ÿ)
2. [æ ˆï¼ˆStackï¼‰](#52-æ ˆstack-25åˆ†é’Ÿ)
3. [é˜Ÿåˆ—ï¼ˆQueueï¼‰](#53-é˜Ÿåˆ—queue-25åˆ†é’Ÿ)
4. [é“¾è¡¨ï¼ˆLinked Listï¼‰](#54-é“¾è¡¨linked-list-30åˆ†é’Ÿ)
5. [æ ‘ï¼ˆTreeï¼‰](#55-æ ‘tree-35åˆ†é’Ÿ)
6. [å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰](#56-å“ˆå¸Œè¡¨hash-table-25åˆ†é’Ÿ)
7. [ç®—æ³•å¤æ‚åº¦åˆ†æ](#57-ç®—æ³•å¤æ‚åº¦åˆ†æ-20åˆ†é’Ÿ)
8. [å®æˆ˜é¡¹ç›®ï¼šä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ](#58-å®æˆ˜é¡¹ç›®ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ-40åˆ†é’Ÿ)

------

## 5.1 æ•°æ®ç»“æ„åŸºç¡€å›é¡¾ (25åˆ†é’Ÿ)

### 5.1.1 ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„ï¼Ÿ

**æ•°æ®ç»“æ„**æ˜¯è®¡ç®—æœºå­˜å‚¨ã€ç»„ç»‡æ•°æ®çš„æ–¹å¼ã€‚é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„å¯ä»¥æé«˜ç®—æ³•æ•ˆç‡ã€‚

```
scsså¤åˆ¶æ•°æ®ç»“æ„åˆ†ç±»ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çº¿æ€§ç»“æ„                            â”‚
â”‚  â”œâ”€ æ•°ç»„ (Array)                    â”‚
â”‚  â”œâ”€ é“¾è¡¨ (Linked List)              â”‚
â”‚  â”œâ”€ æ ˆ (Stack)                      â”‚
â”‚  â””â”€ é˜Ÿåˆ— (Queue)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ éçº¿æ€§ç»“æ„                          â”‚
â”‚  â”œâ”€ æ ‘ (Tree)                       â”‚
â”‚  â”œâ”€ å›¾ (Graph)                      â”‚
â”‚  â””â”€ å † (Heap)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å“ˆå¸Œç»“æ„                            â”‚
â”‚  â””â”€ å“ˆå¸Œè¡¨ (Hash Table)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

------

### 5.1.2 å†…ç½®æ•°æ®ç»“æ„å¯¹æ¯”

#### Pythonå†…ç½®æ•°æ®ç»“æ„

```
pythonå¤åˆ¶# 1. åˆ—è¡¨ (List) - åŠ¨æ€æ•°ç»„
my_list = [1, 2, 3, 4, 5]
my_list.append(6)        # O(1) - æœ«å°¾æ·»åŠ 
my_list.insert(0, 0)     # O(n) - å¼€å¤´æ’å…¥
my_list.pop()            # O(1) - æœ«å°¾åˆ é™¤
my_list.pop(0)           # O(n) - å¼€å¤´åˆ é™¤
print(my_list[2])        # O(1) - ç´¢å¼•è®¿é—®

# 2. å…ƒç»„ (Tuple) - ä¸å¯å˜åºåˆ—
my_tuple = (1, 2, 3, 4, 5)
# my_tuple[0] = 10  # TypeError: ä¸å¯ä¿®æ”¹
print(my_tuple[2])       # O(1) - ç´¢å¼•è®¿é—®

# 3. é›†åˆ (Set) - æ— åºä¸é‡å¤
my_set = {1, 2, 3, 4, 5}
my_set.add(6)            # O(1) - æ·»åŠ 
my_set.remove(3)         # O(1) - åˆ é™¤
print(2 in my_set)       # O(1) - æŸ¥æ‰¾

# 4. å­—å…¸ (Dictionary) - é”®å€¼å¯¹
my_dict = {'a': 1, 'b': 2, 'c': 3}
my_dict['d'] = 4         # O(1) - æ·»åŠ 
del my_dict['a']         # O(1) - åˆ é™¤
print(my_dict['b'])      # O(1) - è®¿é—®

# 5. åŒç«¯é˜Ÿåˆ— (Deque)
from collections import deque
my_deque = deque([1, 2, 3, 4, 5])
my_deque.append(6)       # O(1) - å³ç«¯æ·»åŠ 
my_deque.appendleft(0)   # O(1) - å·¦ç«¯æ·»åŠ 
my_deque.pop()           # O(1) - å³ç«¯åˆ é™¤
my_deque.popleft()       # O(1) - å·¦ç«¯åˆ é™¤
```

#### Javaå†…ç½®æ•°æ®ç»“æ„

```
javaå¤åˆ¶import java.util.*;

public class DataStructuresDemo {
    public static void main(String[] args) {
        // 1. ArrayList - åŠ¨æ€æ•°ç»„
        ArrayList<Integer> arrayList = new ArrayList<>();
        arrayList.add(1);              // O(1) - æœ«å°¾æ·»åŠ 
        arrayList.add(0, 0);           // O(n) - å¼€å¤´æ’å…¥
        arrayList.remove(arrayList.size() - 1);  // O(1) - æœ«å°¾åˆ é™¤
        arrayList.remove(0);           // O(n) - å¼€å¤´åˆ é™¤
        System.out.println(arrayList.get(0));    // O(1) - ç´¢å¼•è®¿é—®
        
        // 2. LinkedList - é“¾è¡¨
        LinkedList<Integer> linkedList = new LinkedList<>();
        linkedList.add(1);             // O(1) - æœ«å°¾æ·»åŠ 
        linkedList.addFirst(0);        // O(1) - å¼€å¤´æ·»åŠ 
        linkedList.removeLast();       // O(1) - æœ«å°¾åˆ é™¤
        linkedList.removeFirst();      // O(1) - å¼€å¤´åˆ é™¤
        
        // 3. HashSet - å“ˆå¸Œé›†åˆ
        HashSet<Integer> hashSet = new HashSet<>();
        hashSet.add(1);                // O(1) - æ·»åŠ 
        hashSet.remove(1);             // O(1) - åˆ é™¤
        System.out.println(hashSet.contains(1));  // O(1) - æŸ¥æ‰¾
        
        // 4. HashMap - å“ˆå¸Œæ˜ å°„
        HashMap<String, Integer> hashMap = new HashMap<>();
        hashMap.put("a", 1);           // O(1) - æ·»åŠ 
        hashMap.remove("a");           // O(1) - åˆ é™¤
        System.out.println(hashMap.get("a"));     // O(1) - è®¿é—®
        
        // 5. Stack - æ ˆ
        Stack<Integer> stack = new Stack<>();
        stack.push(1);                 // O(1) - å‹æ ˆ
        stack.pop();                   // O(1) - å‡ºæ ˆ
        
        // 6. Queue - é˜Ÿåˆ—
        Queue<Integer> queue = new LinkedList<>();
        queue.offer(1);                // O(1) - å…¥é˜Ÿ
        queue.poll();                  // O(1) - å‡ºé˜Ÿ
    }
}
```

------

### 5.1.3 æ—¶é—´å¤æ‚åº¦å¯¹æ¯”è¡¨

| æ•°æ®ç»“æ„       | è®¿é—®     | æœç´¢     | æ’å…¥     | åˆ é™¤     | ç©ºé—´å¤æ‚åº¦ |
| -------------- | -------- | -------- | -------- | -------- | ---------- |
| **æ•°ç»„**       | O(1)     | O(n)     | O(n)     | O(n)     | O(n)       |
| **é“¾è¡¨**       | O(n)     | O(n)     | O(1)     | O(1)     | O(n)       |
| **æ ˆ**         | O(n)     | O(n)     | O(1)     | O(1)     | O(n)       |
| **é˜Ÿåˆ—**       | O(n)     | O(n)     | O(1)     | O(1)     | O(n)       |
| **å“ˆå¸Œè¡¨**     | N/A      | O(1)     | O(1)     | O(1)     | O(n)       |
| **äºŒå‰æœç´¢æ ‘** | O(log n) | O(log n) | O(log n) | O(log n) | O(n)       |
| **å †**         | O(1)     | O(n)     | O(log n) | O(log n) | O(n)       |

------

## 5.2 æ ˆï¼ˆStackï¼‰ (25åˆ†é’Ÿ)

### 5.2.1 æ ˆçš„æ¦‚å¿µ

**æ ˆï¼ˆStackï¼‰**æ˜¯ä¸€ç§åè¿›å…ˆå‡ºï¼ˆLIFO - Last In First Outï¼‰çš„æ•°æ®ç»“æ„ã€‚

```
scsså¤åˆ¶æ ˆçš„æ“ä½œï¼š
    â”Œâ”€â”€â”€â”
    â”‚ 3 â”‚ â† top (æ ˆé¡¶)
    â”œâ”€â”€â”€â”¤
    â”‚ 2 â”‚
    â”œâ”€â”€â”€â”¤
    â”‚ 1 â”‚
    â””â”€â”€â”€â”˜

push(4):  æ·»åŠ å…ƒç´ åˆ°æ ˆé¡¶
pop():    ç§»é™¤å¹¶è¿”å›æ ˆé¡¶å…ƒç´ 
peek():   æŸ¥çœ‹æ ˆé¡¶å…ƒç´ ï¼ˆä¸ç§»é™¤ï¼‰
isEmpty(): æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º
```

------

### 5.2.2 Pythonå®ç°æ ˆ

```
pythonå¤åˆ¶class Stack:
    """æ ˆçš„å®ç°ï¼ˆä½¿ç”¨åˆ—è¡¨ï¼‰"""
    
    def __init__(self):
        self.items = []
    
    def is_empty(self):
        """æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º"""
        return len(self.items) == 0
    
    def push(self, item):
        """å‹æ ˆ"""
        self.items.append(item)
    
    def pop(self):
        """å‡ºæ ˆ"""
        if self.is_empty():
            raise IndexError("Pop from empty stack")
        return self.items.pop()
    
    def peek(self):
        """æŸ¥çœ‹æ ˆé¡¶å…ƒç´ """
        if self.is_empty():
            raise IndexError("Peek from empty stack")
        return self.items[-1]
    
    def size(self):
        """è¿”å›æ ˆçš„å¤§å°"""
        return len(self.items)
    
    def __str__(self):
        return f"Stack({self.items})"


# ä½¿ç”¨æ ˆ
stack = Stack()
print(f"æ ˆæ˜¯å¦ä¸ºç©º: {stack.is_empty()}")  # True

# å‹æ ˆ
stack.push(1)
stack.push(2)
stack.push(3)
print(stack)  # Stack([1, 2, 3])

# æŸ¥çœ‹æ ˆé¡¶
print(f"æ ˆé¡¶å…ƒç´ : {stack.peek()}")  # 3

# å‡ºæ ˆ
print(f"å‡ºæ ˆ: {stack.pop()}")  # 3
print(f"å‡ºæ ˆ: {stack.pop()}")  # 2
print(stack)  # Stack([1])

print(f"æ ˆçš„å¤§å°: {stack.size()}")  # 1
```

------

### 5.2.3 Javaå®ç°æ ˆ

```
javaå¤åˆ¶public class Stack<T> {
    private ArrayList<T> items;
    
    public Stack() {
        items = new ArrayList<>();
    }
    
    // æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º
    public boolean isEmpty() {
        return items.isEmpty();
    }
    
    // å‹æ ˆ
    public void push(T item) {
        items.add(item);
    }
    
    // å‡ºæ ˆ
    public T pop() {
        if (isEmpty()) {
            throw new EmptyStackException();
        }
        return items.remove(items.size() - 1);
    }
    
    // æŸ¥çœ‹æ ˆé¡¶å…ƒç´ 
    public T peek() {
        if (isEmpty()) {
            throw new EmptyStackException();
        }
        return items.get(items.size() - 1);
    }
    
    // è¿”å›æ ˆçš„å¤§å°
    public int size() {
        return items.size();
    }
    
    @Override
    public String toString() {
        return "Stack" + items.toString();
    }
    
    // æµ‹è¯•
    public static void main(String[] args) {
        Stack<Integer> stack = new Stack<>();
        System.out.println("æ ˆæ˜¯å¦ä¸ºç©º: " + stack.isEmpty());  // true
        
        // å‹æ ˆ
        stack.push(1);
        stack.push(2);
        stack.push(3);
        System.out.println(stack);  // Stack[1, 2, 3]
        
        // æŸ¥çœ‹æ ˆé¡¶
        System.out.println("æ ˆé¡¶å…ƒç´ : " + stack.peek());  // 3
        
        // å‡ºæ ˆ
        System.out.println("å‡ºæ ˆ: " + stack.pop());  // 3
        System.out.println("å‡ºæ ˆ: " + stack.pop());  // 2
        System.out.println(stack);  // Stack[1]
        
        System.out.println("æ ˆçš„å¤§å°: " + stack.size());  // 1
    }
}
```

------

### 5.2.4 æ ˆçš„åº”ç”¨

#### åº”ç”¨1ï¼šæ‹¬å·åŒ¹é…

```
pythonå¤åˆ¶def is_balanced_parentheses(expression):
    """æ£€æŸ¥æ‹¬å·æ˜¯å¦åŒ¹é…"""
    stack = Stack()
    opening = "({["
    closing = ")}]"
    pairs = {"(": ")", "{": "}", "[": "]"}
    
    for char in expression:
        if char in opening:
            stack.push(char)
        elif char in closing:
            if stack.is_empty():
                return False
            top = stack.pop()
            if pairs[top] != char:
                return False
    
    return stack.is_empty()


# æµ‹è¯•
print(is_balanced_parentheses("()"))           # True
print(is_balanced_parentheses("()[]{}"))       # True
print(is_balanced_parentheses("(]"))           # False
print(is_balanced_parentheses("([)]"))         # False
print(is_balanced_parentheses("{[()]}"))       # True
print(is_balanced_parentheses("((()"))         # False

```

#### åº”ç”¨2ï¼šè¡¨è¾¾å¼æ±‚å€¼ï¼ˆåç¼€è¡¨è¾¾å¼ï¼‰

```
pythonå¤åˆ¶def evaluate_postfix(expression):
    """
    è®¡ç®—åç¼€è¡¨è¾¾å¼ï¼ˆé€†æ³¢å…°è¡¨è¾¾å¼ï¼‰
    ä¾‹å¦‚: "2 3 + 4 *" = (2 + 3) * 4 = 20
    """
    stack = Stack()
    operators = {'+', '-', '*', '/'}
    
    tokens = expression.split()
    
    for token in tokens:
        if token not in operators:
            # æ•°å­—ï¼Œå‹å…¥æ ˆ
            stack.push(float(token))
        else:
            # è¿ç®—ç¬¦ï¼Œå¼¹å‡ºä¸¤ä¸ªæ“ä½œæ•°
            if stack.size() < 2:
                raise ValueError("Invalid expression")
            
            operand2 = stack.pop()
            operand1 = stack.pop()
            
            # æ‰§è¡Œè¿ç®—
            if token == '+':
                result = operand1 + operand2
            elif token == '-':
                result = operand1 - operand2
            elif token == '*':
                result = operand1 * operand2
            elif token == '/':
                if operand2 == 0:
                    raise ValueError("Division by zero")
                result = operand1 / operand2
            
            stack.push(result)
    
    if stack.size() != 1:
        raise ValueError("Invalid expression")
    
    return stack.pop()


# æµ‹è¯•
print(evaluate_postfix("2 3 +"))           # 5.0
print(evaluate_postfix("2 3 + 4 *"))       # 20.0
print(evaluate_postfix("5 1 2 + 4 * + 3 -")) # 14.0
```

#### åº”ç”¨3ï¼šå‡½æ•°è°ƒç”¨æ ˆ

```
pythonå¤åˆ¶def factorial(n):
    """
    é€’å½’è®¡ç®—é˜¶ä¹˜
    è°ƒç”¨æ ˆæ¼”ç¤ºï¼š
    factorial(3)
      â†’ factorial(2)
        â†’ factorial(1)
          â†’ factorial(0)
          â† return 1
        â† return 1 * 1 = 1
      â† return 2 * 1 = 2
    â† return 3 * 2 = 6
    """
    print(f"è°ƒç”¨ factorial({n})")
    if n <= 1:
        print(f"è¿”å› 1")
        return 1
    result = n * factorial(n - 1)
    print(f"è¿”å› {n} * factorial({n-1}) = {result}")
    return result


print("\né˜¶ä¹˜è®¡ç®—è¿‡ç¨‹ï¼š")
print(f"ç»“æœ: {factorial(4)}")
```

#### åº”ç”¨4ï¼šæµè§ˆå™¨å†å²è®°å½•

```
pythonå¤åˆ¶class BrowserHistory:
    """æµè§ˆå™¨å†å²è®°å½•ï¼ˆä½¿ç”¨ä¸¤ä¸ªæ ˆï¼‰"""
    
    def __init__(self, homepage):
        self.back_stack = Stack()
        self.forward_stack = Stack()
        self.current = homepage
    
    def visit(self, url):
        """è®¿é—®æ–°é¡µé¢"""
        self.back_stack.push(self.current)
        self.current = url
        # è®¿é—®æ–°é¡µé¢åï¼Œå‰è¿›å†å²æ¸…ç©º
        self.forward_stack = Stack()
        print(f"è®¿é—®: {url}")
    
    def back(self):
        """åé€€"""
        if self.back_stack.is_empty():
            print("æ— æ³•åé€€")
            return self.current
        
        self.forward_stack.push(self.current)
        self.current = self.back_stack.pop()
        print(f"åé€€åˆ°: {self.current}")
        return self.current
    
    def forward(self):
        """å‰è¿›"""
        if self.forward_stack.is_empty():
            print("æ— æ³•å‰è¿›")
            return self.current
        
        self.back_stack.push(self.current)
        self.current = self.forward_stack.pop()
        print(f"å‰è¿›åˆ°: {self.current}")
        return self.current
    
    def current_page(self):
        """å½“å‰é¡µé¢"""
        return self.current


# ä½¿ç”¨æµè§ˆå™¨å†å²
browser = BrowserHistory("google.com")
browser.visit("youtube.com")
browser.visit("github.com")
browser.visit("stackoverflow.com")
print(f"å½“å‰é¡µé¢: {browser.current_page()}")

browser.back()    # å›åˆ° github.com
browser.back()    # å›åˆ° youtube.com
browser.forward() # å‰è¿›åˆ° github.com
browser.visit("reddit.com")  # è®¿é—®æ–°é¡µé¢ï¼Œå‰è¿›å†å²æ¸…ç©º
browser.forward() # æ— æ³•å‰è¿›
```

------

## 5.3 é˜Ÿåˆ—ï¼ˆQueueï¼‰ (25åˆ†é’Ÿ)

### 5.3.1 é˜Ÿåˆ—çš„æ¦‚å¿µ

**é˜Ÿåˆ—ï¼ˆQueueï¼‰**æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºï¼ˆFIFO - First In First Outï¼‰çš„æ•°æ®ç»“æ„ã€‚

```
scsså¤åˆ¶é˜Ÿåˆ—çš„æ“ä½œï¼š
    front                    rear
      â†“                        â†“
    â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
    â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚
    â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜

enqueue(6): åœ¨é˜Ÿå°¾æ·»åŠ å…ƒç´ 
dequeue():  ä»é˜Ÿé¦–ç§»é™¤å¹¶è¿”å›å…ƒç´ 
peek():     æŸ¥çœ‹é˜Ÿé¦–å…ƒç´ ï¼ˆä¸ç§»é™¤ï¼‰
isEmpty():  æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º
```

------

### 5.3.2 Pythonå®ç°é˜Ÿåˆ—

```
pythonå¤åˆ¶from collections import deque

class Queue:
    """é˜Ÿåˆ—çš„å®ç°ï¼ˆä½¿ç”¨dequeï¼‰"""
    
    def __init__(self):
        self.items = deque()
    
    def is_empty(self):
        """æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º"""
        return len(self.items) == 0
    
    def enqueue(self, item):
        """å…¥é˜Ÿï¼ˆåœ¨é˜Ÿå°¾æ·»åŠ ï¼‰"""
        self.items.append(item)
    
    def dequeue(self):
        """å‡ºé˜Ÿï¼ˆä»é˜Ÿé¦–ç§»é™¤ï¼‰"""
        if self.is_empty():
            raise IndexError("Dequeue from empty queue")
        return self.items.popleft()
    
    def peek(self):
        """æŸ¥çœ‹é˜Ÿé¦–å…ƒç´ """
        if self.is_empty():
            raise IndexError("Peek from empty queue")
        return self.items[0]
    
    def size(self):
        """è¿”å›é˜Ÿåˆ—å¤§å°"""
        return len(self.items)
    
    def __str__(self):
        return f"Queue({list(self.items)})"


# ä½¿ç”¨é˜Ÿåˆ—
queue = Queue()
print(f"é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º: {queue.is_empty()}")  # True

# å…¥é˜Ÿ
queue.enqueue(1)
queue.enqueue(2)
queue.enqueue(3)
print(queue)  # Queue([1, 2, 3])

# æŸ¥çœ‹é˜Ÿé¦–
print(f"é˜Ÿé¦–å…ƒç´ : {queue.peek()}")  # 1

# å‡ºé˜Ÿ
print(f"å‡ºé˜Ÿ: {queue.dequeue()}")  # 1
print(f"å‡ºé˜Ÿ: {queue.dequeue()}")  # 2
print(queue)  # Queue([3])

print(f"é˜Ÿåˆ—å¤§å°: {queue.size()}")  # 1
```

------

### 5.3.3 å¾ªç¯é˜Ÿåˆ—

```
pythonå¤åˆ¶class CircularQueue:
    """å¾ªç¯é˜Ÿåˆ—ï¼ˆå›ºå®šå¤§å°ï¼‰"""
    
    def __init__(self, capacity):
        self.capacity = capacity
        self.items = [None] * capacity
        self.front = 0
        self.rear = 0
        self.count = 0
    
    def is_empty(self):
        return self.count == 0
    
    def is_full(self):
        return self.count == self.capacity
    
    def enqueue(self, item):
        """å…¥é˜Ÿ"""
        if self.is_full():
            raise OverflowError("Queue is full")
        
        self.items[self.rear] = item
        self.rear = (self.rear + 1) % self.capacity
        self.count += 1
    
    def dequeue(self):
        """å‡ºé˜Ÿ"""
        if self.is_empty():
            raise IndexError("Dequeue from empty queue")
        
        item = self.items[self.front]
        self.items[self.front] = None
        self.front = (self.front + 1) % self.capacity
        self.count -= 1
        return item
    
    def peek(self):
        """æŸ¥çœ‹é˜Ÿé¦–å…ƒç´ """
        if self.is_empty():
            raise IndexError("Peek from empty queue")
        return self.items[self.front]
    
    def size(self):
        return self.count
    
    def __str__(self):
        if self.is_empty():
            return "CircularQueue([])"
        
        result = []
        index = self.front
        for _ in range(self.count):
            result.append(self.items[index])
            index = (index + 1) % self.capacity
        return f"CircularQueue({result})"


# ä½¿ç”¨å¾ªç¯é˜Ÿåˆ—
cq = CircularQueue(5)
print(f"é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º: {cq.is_empty()}")  # True

# å…¥é˜Ÿ
for i in range(1, 6):
    cq.enqueue(i)
print(cq)  # CircularQueue([1, 2, 3, 4, 5])
print(f"é˜Ÿåˆ—æ˜¯å¦æ»¡: {cq.is_full()}")  # True

# å‡ºé˜Ÿ
print(f"å‡ºé˜Ÿ: {cq.dequeue()}")  # 1
print(f"å‡ºé˜Ÿ: {cq.dequeue()}")  # 2

# å†å…¥é˜Ÿ
cq.enqueue(6)
cq.enqueue(7)
print(cq)  # CircularQueue([3, 4, 5, 6, 7])
```

------

### 5.3.4 Javaå®ç°é˜Ÿåˆ—

```
javaå¤åˆ¶import java.util.LinkedList;

public class Queue<T> {
    private LinkedList<T> items;
    
    public Queue() {
        items = new LinkedList<>();
    }
    
    // æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º
    public boolean isEmpty() {
        return items.isEmpty();
    }
    
    // å…¥é˜Ÿ
    public void enqueue(T item) {
        items.addLast(item);
    }
    
    // å‡ºé˜Ÿ
    public T dequeue() {
        if (isEmpty()) {
            throw new IllegalStateException("Dequeue from empty queue");
        }
        return items.removeFirst();
    }
    
    // æŸ¥çœ‹é˜Ÿé¦–å…ƒç´ 
    public T peek() {
        if (isEmpty()) {
            throw new IllegalStateException("Peek from empty queue");
        }
        return items.getFirst();
    }
    
    // è¿”å›é˜Ÿåˆ—å¤§å°
    public int size() {
        return items.size();
    }
    
    @Override
    public String toString() {
        return "Queue" + items.toString();
    }
    
    // æµ‹è¯•
    public static void main(String[] args) {
        Queue<Integer> queue = new Queue<>();
        System.out.println("é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º: " + queue.isEmpty());  // true
        
        // å…¥é˜Ÿ
        queue.enqueue(1);
        queue.enqueue(2);
        queue.enqueue(3);
        System.out.println(queue);  // Queue[1, 2, 3]
        
        // æŸ¥çœ‹é˜Ÿé¦–
        System.out.println("é˜Ÿé¦–å…ƒç´ : " + queue.peek());  // 1
        
        // å‡ºé˜Ÿ
        System.out.println("å‡ºé˜Ÿ: " + queue.dequeue());  // 1
        System.out.println("å‡ºé˜Ÿ: " + queue.dequeue());  // 2
        System.out.println(queue);  // Queue[3]
        
        System.out.println("é˜Ÿåˆ—å¤§å°: " + queue.size());  // 1
    }
}
```

------

### 5.3.5 é˜Ÿåˆ—çš„åº”ç”¨

#### åº”ç”¨1ï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰

```
pythonå¤åˆ¶def bfs_tree(root):
    """
    æ ‘çš„å¹¿åº¦ä¼˜å…ˆéå†
    """
    if not root:
        return []
    
    result = []
    queue = Queue()
    queue.enqueue(root)
    
    while not queue.is_empty():
        node = queue.dequeue()
        result.append(node.value)
        
        # å°†å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
        if node.left:
            queue.enqueue(node.left)
        if node.right:
            queue.enqueue(node.right)
    
    return result
```

#### åº”ç”¨2ï¼šæ‰“å°é˜Ÿåˆ—ï¼ˆPrint Queueï¼‰

```
pythonå¤åˆ¶class PrintJob:
    """æ‰“å°ä»»åŠ¡"""
    def __init__(self, name, pages):
        self.name = name
        self.pages = pages
    
    def __str__(self):
        return f"PrintJob({self.name}, {self.pages} pages)"


class PrintQueue:
    """æ‰“å°é˜Ÿåˆ—"""
    
    def __init__(self):
        self.queue = Queue()
    
    def add_job(self, job):
        """æ·»åŠ æ‰“å°ä»»åŠ¡"""
        self.queue.enqueue(job)
        print(f"æ·»åŠ ä»»åŠ¡: {job}")
    
    def process_job(self):
        """å¤„ç†ä¸€ä¸ªæ‰“å°ä»»åŠ¡"""
        if self.queue.is_empty():
            print("æ²¡æœ‰å¾…å¤„ç†çš„ä»»åŠ¡")
            return None
        
        job = self.queue.dequeue()
        print(f"æ­£åœ¨æ‰“å°: {job}")
        return job
    
    def pending_jobs(self):
        """è¿”å›å¾…å¤„ç†ä»»åŠ¡æ•°"""
        return self.queue.size()


# ä½¿ç”¨æ‰“å°é˜Ÿåˆ—
printer = PrintQueue()
printer.add_job(PrintJob("Document1.pdf", 10))
printer.add_job(PrintJob("Report.docx", 5))
printer.add_job(PrintJob("Photo.jpg", 1))

print(f"\nå¾…å¤„ç†ä»»åŠ¡æ•°: {printer.pending_jobs()}\n")

printer.process_job()
printer.process_job()
print(f"\nå¾…å¤„ç†ä»»åŠ¡æ•°: {printer.pending_jobs()}\n")
printer.process_job()
printer.process_job()
```

#### åº”ç”¨3ï¼šä»»åŠ¡è°ƒåº¦

```
pythonå¤åˆ¶import time
from datetime import datetime

class Task:
    """ä»»åŠ¡ç±»"""
    def __init__(self, name, priority=0):
        self.name = name
        self.priority = priority
        self.created_at = datetime.now()
    
    def execute(self):
        print(f"æ‰§è¡Œä»»åŠ¡: {self.name}")
        time.sleep(0.5)  # æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œ
    
    def __str__(self):
        return f"Task({self.name}, priority={self.priority})"


class TaskScheduler:
    """ä»»åŠ¡è°ƒåº¦å™¨"""
    
    def __init__(self):
        self.queue = Queue()
    
    def add_task(self, task):
        """æ·»åŠ ä»»åŠ¡"""
        self.queue.enqueue(task)
        print(f"æ·»åŠ ä»»åŠ¡: {task}")
    
    def run(self):
        """è¿è¡Œæ‰€æœ‰ä»»åŠ¡"""
        print("\nå¼€å§‹æ‰§è¡Œä»»åŠ¡...")
        while not self.queue.is_empty():
            task = self.queue.dequeue()
            task.execute()
        print("æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•")


# ä½¿ç”¨ä»»åŠ¡è°ƒåº¦å™¨
scheduler = TaskScheduler()
scheduler.add_task(Task("å‘é€é‚®ä»¶"))
scheduler.add_task(Task("ç”ŸæˆæŠ¥å‘Š"))
scheduler.add_task(Task("å¤‡ä»½æ•°æ®"))
scheduler.run()
```

------

## 5.4 é“¾è¡¨ï¼ˆLinked Listï¼‰ (30åˆ†é’Ÿ)

### 5.4.1 é“¾è¡¨çš„æ¦‚å¿µ

**é“¾è¡¨ï¼ˆLinked Listï¼‰**æ˜¯ä¸€ç§çº¿æ€§æ•°æ®ç»“æ„ï¼Œå…ƒç´ ä¸è¿ç»­å­˜å‚¨ï¼Œé€šè¿‡æŒ‡é’ˆè¿æ¥ã€‚

```
bashå¤åˆ¶å•å‘é“¾è¡¨ï¼š
    head
     â†“
   â”Œâ”€â”€â”€â”¬â”€â”€â”   â”Œâ”€â”€â”€â”¬â”€â”€â”   â”Œâ”€â”€â”€â”¬â”€â”€â”   â”Œâ”€â”€â”€â”¬â”€â”€â”
   â”‚ 1 â”‚ â—â”€â†’  â”‚ 2 â”‚ â—â”€â†’  â”‚ 3 â”‚ â—â”€â†’  â”‚ 4 â”‚ âœ—â”‚
   â””â”€â”€â”€â”´â”€â”€â”˜   â””â”€â”€â”€â”´â”€â”€â”˜   â””â”€â”€â”€â”´â”€â”€â”˜   â””â”€â”€â”€â”´â”€â”€â”˜

åŒå‘é“¾è¡¨ï¼š
    head
     â†“
   â”Œâ”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”   â”Œâ”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”   â”Œâ”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”
   â”‚âœ— â”‚ 1 â”‚ â—â”€â†’â†â”€â— â”‚ 2 â”‚ â—â”€â†’â†â”€â— â”‚ 3 â”‚ âœ—â”‚
   â””â”€â”€â”´â”€â”€â”€â”´â”€â”€â”˜   â””â”€â”€â”´â”€â”€â”€â”´â”€â”€â”˜   â””â”€â”€â”´â”€â”€â”€â”´â”€â”€â”˜
```

**ä¼˜ç‚¹ï¼š**

- åŠ¨æ€å¤§å°
- æ’å…¥/åˆ é™¤é«˜æ•ˆï¼ˆO(1)ï¼‰

**ç¼ºç‚¹ï¼š**

- è®¿é—®å…ƒç´ æ…¢ï¼ˆO(n)ï¼‰
- é¢å¤–çš„å†…å­˜å¼€é”€ï¼ˆå­˜å‚¨æŒ‡é’ˆï¼‰

------

### 5.4.2 Pythonå®ç°å•å‘é“¾è¡¨

```
pythonå¤åˆ¶class Node:
    """é“¾è¡¨èŠ‚ç‚¹"""
    def __init__(self, data):
        self.data = data
        self.next = None
    
    def __str__(self):
        return str(self.data)


class LinkedList:
    """å•å‘é“¾è¡¨"""
    
    def __init__(self):
        self.head = None
        self.size = 0
    
    def is_empty(self):
        """æ£€æŸ¥é“¾è¡¨æ˜¯å¦ä¸ºç©º"""
        return self.head is None
    
    def append(self, data):
        """åœ¨é“¾è¡¨æœ«å°¾æ·»åŠ èŠ‚ç‚¹"""
        new_node = Node(data)
        
        if self.is_empty():
            self.head = new_node
        else:
            current = self.head
            while current.next:
                current = current.next
            current.next = new_node
        
        self.size += 1
    
    def prepend(self, data):
        """åœ¨é“¾è¡¨å¼€å¤´æ·»åŠ èŠ‚ç‚¹"""
        new_node = Node(data)
        new_node.next = self.head
        self.head = new_node
        self.size += 1
    
    def insert(self, index, data):
        """åœ¨æŒ‡å®šä½ç½®æ’å…¥èŠ‚ç‚¹"""
        if index < 0 or index > self.size:
            raise IndexError("Index out of range")
        
        if index == 0:
            self.prepend(data)
            return
        
        new_node = Node(data)
        current = self.head
        for _ in range(index - 1):
            current = current.next
        
        new_node.next = current.next
        current.next = new_node
        self.size += 1
    
    def delete(self, data):
        """åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…çš„èŠ‚ç‚¹"""
        if self.is_empty():
            raise ValueError("List is empty")
        
        # å¦‚æœè¦åˆ é™¤çš„æ˜¯å¤´èŠ‚ç‚¹
        if self.head.data == data:
            self.head = self.head.next
            self.size -= 1
            return
        
        # æŸ¥æ‰¾è¦åˆ é™¤çš„èŠ‚ç‚¹
        current = self.head
        while current.next:
            if current.next.data == data:
                current.next = current.next.next
                self.size -= 1
                return
            current = current.next
        
        raise ValueError(f"Value {data} not found in list")
    
    def find(self, data):
        """æŸ¥æ‰¾èŠ‚ç‚¹"""
        current = self.head
        index = 0
        
        while current:
            if current.data == data:
                return index
            current = current.next
            index += 1
        
        return -1
    
    def get(self, index):
        """è·å–æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹"""
        if index < 0 or index >= self.size:
            raise IndexError("Index out of range")
        
        current = self.head
        for _ in range(index):
            current = current.next
        
        return current.data
    
    def reverse(self):
        """åè½¬é“¾è¡¨"""
        prev = None
        current = self.head
        
        while current:
            next_node = current.next
            current.next = prev
            prev = current
            current = next_node
        
        self.head = prev
    
    def __len__(self):
        return self.size
    
    def __str__(self):
        if self.is_empty():
            return "LinkedList([])"
        
        result = []
        current = self.head
        while current:
            result.append(str(current.data))
            current = current.next
        
        return f"LinkedList([{' -> '.join(result)}])"


# ä½¿ç”¨é“¾è¡¨
ll = LinkedList()
print(f"é“¾è¡¨æ˜¯å¦ä¸ºç©º: {ll.is_empty()}")  # True

# æ·»åŠ å…ƒç´ 
ll.append(1)
ll.append(2)
ll.append(3)
print(ll)  # LinkedList([1 -> 2 -> 3])

# åœ¨å¼€å¤´æ·»åŠ 
ll.prepend(0)
print(ll)  # LinkedList([0 -> 1 -> 2 -> 3])

# æ’å…¥
ll.insert(2, 1.5)
print(ll)  # LinkedList([0 -> 1 -> 1.5 -> 2 -> 3])

# æŸ¥æ‰¾
print(f"æŸ¥æ‰¾å…ƒç´ 2: ç´¢å¼• {ll.find(2)}")  # 3

# è·å–å…ƒç´ 
print(f"ç´¢å¼•2çš„å…ƒç´ : {ll.get(2)}")  # 1.5

# åˆ é™¤
ll.delete(1.5)
print(ll)  # LinkedList([0 -> 1 -> 2 -> 3])

# åè½¬
ll.reverse()
print(ll)  # LinkedList([3 -> 2 -> 1 -> 0])

print(f"é“¾è¡¨é•¿åº¦: {len(ll)}")  # 4
```

------

### 5.4.3 Pythonå®ç°åŒå‘é“¾è¡¨

```
pythonå¤åˆ¶class DNode:
    """åŒå‘é“¾è¡¨èŠ‚ç‚¹"""
    def __init__(self, data):
        self.data = data
        self.prev = None
        self.next = None


class DoublyLinkedList:
    """åŒå‘é“¾è¡¨"""
    
    def __init__(self):
        self.head = None
        self.tail = None
        self.size = 0
    
    def is_empty(self):
        return self.head is None
    
    def append(self, data):
        """åœ¨æœ«å°¾æ·»åŠ """
        new_node = DNode(data)
        
        if self.is_empty():
            self.head = self.tail = new_node
        else:
            new_node.prev = self.tail
            self.tail.next = new_node
            self.tail = new_node
        
        self.size += 1
    
    def prepend(self, data):
        """åœ¨å¼€å¤´æ·»åŠ """
        new_node = DNode(data)
        
        if self.is_empty():
            self.head = self.tail = new_node
        else:
            new_node.next = self.head
            self.head.prev = new_node
            self.head = new_node
        
        self.size += 1
    
    def delete(self, data):
        """åˆ é™¤èŠ‚ç‚¹"""
        if self.is_empty():
            raise ValueError("List is empty")
        
        current = self.head
        
        while current:
            if current.data == data:
                # åˆ é™¤å¤´èŠ‚ç‚¹
                if current == self.head:
                    self.head = current.next
                    if self.head:
                        self.head.prev = None
                    else:
                        self.tail = None
                # åˆ é™¤å°¾èŠ‚ç‚¹
                elif current == self.tail:
                    self.tail = current.prev
                    self.tail.next = None
                # åˆ é™¤ä¸­é—´èŠ‚ç‚¹
                else:
                    current.prev.next = current.next
                    current.next.prev = current.prev
                
                self.size -= 1
                return
            
            current = current.next
        
        raise ValueError(f"Value {data} not found in list")
    
    def __str__(self):
        if self.is_empty():
            return "DoublyLinkedList([])"
        
        result = []
        current = self.head
        while current:
            result.append(str(current.data))
            current = current.next
        
        return f"DoublyLinkedList([{' <-> '.join(result)}])"


# ä½¿ç”¨åŒå‘é“¾è¡¨
dll = DoublyLinkedList()
dll.append(1)
dll.append(2)
dll.append(3)
dll.prepend(0)
print(dll)  # DoublyLinkedList([0 <-> 1 <-> 2 <-> 3])

dll.delete(2)
print(dll)  # DoublyLinkedList([0 <-> 1 <-> 3])
```

------

### 5.4.4 Javaå®ç°é“¾è¡¨

```
javaå¤åˆ¶class Node<T> {
    T data;
    Node<T> next;
    
    public Node(T data) {
        this.data = data;
        this.next = null;
    }
}

public class LinkedList<T> {
    private Node<T> head;
    private int size;
    
    public LinkedList() {
        this.head = null;
        this.size = 0;
    }
    
    public boolean isEmpty() {
        return head == null;
    }
    
    // åœ¨æœ«å°¾æ·»åŠ 
    public void append(T data) {
        Node<T> newNode = new Node<>(data);
        
        if (isEmpty()) {
            head = newNode;
        } else {
            Node<T> current = head;
            while (current.next != null) {
                current = current.next;
            }
            current.next = newNode;
        }
        size++;
    }
    
    // åœ¨å¼€å¤´æ·»åŠ 
    public void prepend(T data) {
        Node<T> newNode = new Node<>(data);
        newNode.next = head;
        head = newNode;
        size++;
    }
    
    // åˆ é™¤èŠ‚ç‚¹
    public void delete(T data) {
        if (isEmpty()) {
            throw new IllegalStateException("List is empty");
        }
        
        // åˆ é™¤å¤´èŠ‚ç‚¹
        if (head.data.equals(data)) {
            head = head.next;
            size--;
            return;
        }
        
        // æŸ¥æ‰¾å¹¶åˆ é™¤
        Node<T> current = head;
        while (current.next != null) {
            if (current.next.data.equals(data)) {
                current.next = current.next.next;
                size--;
                return;
            }
            current = current.next;
        }
        
        throw new IllegalArgumentException("Value not found");
    }
    
    // æŸ¥æ‰¾
    public int find(T data) {
        Node<T> current = head;
        int index = 0;
        
        while (current != null) {
            if (current.data.equals(data)) {
                return index;
            }
            current = current.next;
            index++;
        }
        
        return -1;
    }
    
    public int size() {
        return size;
    }
    
    @Override
    public String toString() {
        if (isEmpty()) {
            return "LinkedList([])";
        }
        
        StringBuilder sb = new StringBuilder("LinkedList([");
        Node<T> current = head;
        
        while (current != null) {
            sb.append(current.data);
            if (current.next != null) {
                sb.append(" -> ");
            }
            current = current.next;
        }
        
        sb.append("])");
        return sb.toString();
    }
    
    // æµ‹è¯•
    public static void main(String[] args) {
        LinkedList<Integer> ll = new LinkedList<>();
        
        ll.append(1);
        ll.append(2);
        ll.append(3);
        ll.prepend(0);
        System.out.println(ll);  // LinkedList([0 -> 1 -> 2 -> 3])
        
        System.out.println("æŸ¥æ‰¾2: " + ll.find(2));  // 2
        
        ll.delete(2);
        System.out.println(ll);  // LinkedList([0 -> 1 -> 3])
        
        System.out.println("å¤§å°: " + ll.size());  // 3
    }
}
```

------

### 5.4.5 é“¾è¡¨çš„ç»å…¸é—®é¢˜

#### é—®é¢˜1ï¼šæ£€æµ‹é“¾è¡¨æ˜¯å¦æœ‰ç¯

```
pythonå¤åˆ¶def has_cycle(head):
    """
    ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ£€æµ‹ç¯
    å¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨2æ­¥ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨1æ­¥
    å¦‚æœæœ‰ç¯ï¼Œå¿«æ…¢æŒ‡é’ˆæœ€ç»ˆä¼šç›¸é‡
    """
    if not head or not head.next:
        return False
    
    slow = head
    fast = head.next
    
    while slow != fast:
        if not fast or not fast.next:
            return False
        slow = slow.next
        fast = fast.next.next
    
    return True
```

#### é—®é¢˜2ï¼šæ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹

```
pythonå¤åˆ¶def find_middle(head):
    """
    ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾ä¸­é—´èŠ‚ç‚¹
    å¿«æŒ‡é’ˆåˆ°è¾¾æœ«å°¾æ—¶ï¼Œæ…¢æŒ‡é’ˆåœ¨ä¸­é—´
    """
    if not head:
        return None
    
    slow = head
    fast = head
    
    while fast and fast.next:
        slow = slow.next
        fast = fast.next.next
    
    return slow
```

#### é—®é¢˜3ï¼šåˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨

```
pythonå¤åˆ¶def merge_sorted_lists(l1, l2):
    """åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨"""
    dummy = Node(0)
    current = dummy
    
    while l1 and l2:
        if l1.data <= l2.data:
            current.next = l1
            l1 = l1.next
        else:
            current.next = l2
            l2 = l2.next
        current = current.next
```

ç»§ç»­ç”Ÿæˆï¼š

```
pythonå¤åˆ¶    # è¿æ¥å‰©ä½™èŠ‚ç‚¹
    if l1:
        current.next = l1
    if l2:
        current.next = l2
    
    return dummy.next
```

------

## 5.5 æ ‘ï¼ˆTreeï¼‰ (35åˆ†é’Ÿ)

### 5.5.1 æ ‘çš„æ¦‚å¿µ

**æ ‘ï¼ˆTreeï¼‰**æ˜¯ä¸€ç§éçº¿æ€§çš„å±‚æ¬¡æ•°æ®ç»“æ„ï¼Œç”±èŠ‚ç‚¹ç»„æˆã€‚

```
diffå¤åˆ¶æ ‘çš„åŸºæœ¬æœ¯è¯­ï¼š
         1          â† æ ¹èŠ‚ç‚¹ (root)
       /   \
      2     3       â† èŠ‚ç‚¹ (node)
     / \   / \
    4   5 6   7     â† å¶å­èŠ‚ç‚¹ (leaf)
    
- æ ¹èŠ‚ç‚¹ï¼šæ ‘çš„é¡¶éƒ¨èŠ‚ç‚¹
- çˆ¶èŠ‚ç‚¹ï¼šæœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹
- å­èŠ‚ç‚¹ï¼šæŸèŠ‚ç‚¹çš„ç›´æ¥ä¸‹çº§
- å¶å­èŠ‚ç‚¹ï¼šæ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹
- æ·±åº¦ï¼šä»æ ¹åˆ°èŠ‚ç‚¹çš„è·¯å¾„é•¿åº¦
- é«˜åº¦ï¼šä»èŠ‚ç‚¹åˆ°æœ€æ·±å¶å­çš„è·¯å¾„é•¿åº¦
- å±‚çº§ï¼šæ ¹èŠ‚ç‚¹ä¸ºç¬¬0å±‚
```

------

### 5.5.2 äºŒå‰æ ‘ï¼ˆBinary Treeï¼‰

**äºŒå‰æ ‘**ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼ˆå·¦å­èŠ‚ç‚¹å’Œå³å­èŠ‚ç‚¹ï¼‰

```
markdownå¤åˆ¶äºŒå‰æ ‘ç±»å‹ï¼š

1. å®Œå…¨äºŒå‰æ ‘ï¼š
         1
       /   \
      2     3
     / \   /
    4   5 6

2. æ»¡äºŒå‰æ ‘ï¼š
         1
       /   \
      2     3
     / \   / \
    4   5 6   7

3. äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰ï¼š
         5
       /   \
      3     8
     / \   / \
    1   4 6   9
    
å·¦å­æ ‘ < æ ¹ < å³å­æ ‘
```

------

### 5.5.3 Pythonå®ç°äºŒå‰æ ‘

```
pythonå¤åˆ¶class TreeNode:
    """æ ‘èŠ‚ç‚¹"""
    def __init__(self, value):
        self.value = value
        self.left = None
        self.right = None
    
    def __str__(self):
        return str(self.value)


class BinaryTree:
    """äºŒå‰æ ‘"""
    
    def __init__(self, root_value=None):
        self.root = TreeNode(root_value) if root_value is not None else None
    
    def is_empty(self):
        """æ£€æŸ¥æ ‘æ˜¯å¦ä¸ºç©º"""
        return self.root is None
    
    # ==================== éå†æ–¹æ³• ====================
    
    def preorder_traversal(self, node=None, result=None):
        """
        å‰åºéå†ï¼šæ ¹ -> å·¦ -> å³
        """
        if result is None:
            result = []
        if node is None:
            node = self.root
        
        if node:
            result.append(node.value)
            self.preorder_traversal(node.left, result)
            self.preorder_traversal(node.right, result)
        
        return result
    
    def inorder_traversal(self, node=None, result=None):
        """
        ä¸­åºéå†ï¼šå·¦ -> æ ¹ -> å³
        """
        if result is None:
            result = []
        if node is None:
            node = self.root
        
        if node:
            self.inorder_traversal(node.left, result)
            result.append(node.value)
            self.inorder_traversal(node.right, result)
        
        return result
    
    def postorder_traversal(self, node=None, result=None):
        """
        ååºéå†ï¼šå·¦ -> å³ -> æ ¹
        """
        if result is None:
            result = []
        if node is None:
            node = self.root
        
        if node:
            self.postorder_traversal(node.left, result)
            self.postorder_traversal(node.right, result)
            result.append(node.value)
        
        return result
    
    def level_order_traversal(self):
        """
        å±‚åºéå†ï¼ˆå¹¿åº¦ä¼˜å…ˆï¼‰
        """
        if not self.root:
            return []
        
        result = []
        queue = Queue()
        queue.enqueue(self.root)
        
        while not queue.is_empty():
            node = queue.dequeue()
            result.append(node.value)
            
            if node.left:
                queue.enqueue(node.left)
            if node.right:
                queue.enqueue(node.right)
        
        return result
    
    # ==================== æ ‘çš„å±æ€§ ====================
    
    def height(self, node=None):
        """è®¡ç®—æ ‘çš„é«˜åº¦"""
        if node is None:
            node = self.root
        
        if not node:
            return -1
        
        left_height = self.height(node.left)
        right_height = self.height(node.right)
        
        return max(left_height, right_height) + 1
    
    def count_nodes(self, node=None):
        """è®¡ç®—èŠ‚ç‚¹æ€»æ•°"""
        if node is None:
            node = self.root
        
        if not node:
            return 0
        
        return 1 + self.count_nodes(node.left) + self.count_nodes(node.right)
    
    def count_leaves(self, node=None):
        """è®¡ç®—å¶å­èŠ‚ç‚¹æ•°"""
        if node is None:
            node = self.root
        
        if not node:
            return 0
        
        if not node.left and not node.right:
            return 1
        
        return self.count_leaves(node.left) + self.count_leaves(node.right)
    
    # ==================== å¯è§†åŒ– ====================
    
    def print_tree(self, node=None, level=0, prefix="Root: "):
        """æ‰“å°æ ‘ç»“æ„"""
        if node is None:
            node = self.root
        
        if node:
            print(" " * (level * 4) + prefix + str(node.value))
            if node.left or node.right:
                if node.left:
                    self.print_tree(node.left, level + 1, "L--- ")
                else:
                    print(" " * ((level + 1) * 4) + "L--- None")
                
                if node.right:
                    self.print_tree(node.right, level + 1, "R--- ")
                else:
                    print(" " * ((level + 1) * 4) + "R--- None")


# åˆ›å»ºäºŒå‰æ ‘
#         1
#       /   \
#      2     3
#     / \   / \
#    4   5 6   7

tree = BinaryTree(1)
tree.root.left = TreeNode(2)
tree.root.right = TreeNode(3)
tree.root.left.left = TreeNode(4)
tree.root.left.right = TreeNode(5)
tree.root.right.left = TreeNode(6)
tree.root.right.right = TreeNode(7)

# æ‰“å°æ ‘ç»“æ„
print("æ ‘ç»“æ„ï¼š")
tree.print_tree()

# éå†
print("\nå‰åºéå†:", tree.preorder_traversal())    # [1, 2, 4, 5, 3, 6, 7]
print("ä¸­åºéå†:", tree.inorder_traversal())      # [4, 2, 5, 1, 6, 3, 7]
print("ååºéå†:", tree.postorder_traversal())    # [4, 5, 2, 6, 7, 3, 1]
print("å±‚åºéå†:", tree.level_order_traversal())  # [1, 2, 3, 4, 5, 6, 7]

# æ ‘çš„å±æ€§
print(f"\næ ‘çš„é«˜åº¦: {tree.height()}")            # 2
print(f"èŠ‚ç‚¹æ€»æ•°: {tree.count_nodes()}")          # 7
print(f"å¶å­èŠ‚ç‚¹æ•°: {tree.count_leaves()}")      # 4
```

------

### 5.5.4 äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰

```
pythonå¤åˆ¶class BinarySearchTree:
    """äºŒå‰æœç´¢æ ‘"""
    
    def __init__(self):
        self.root = None
    
    def insert(self, value):
        """æ’å…¥èŠ‚ç‚¹"""
        if not self.root:
            self.root = TreeNode(value)
        else:
            self._insert_recursive(self.root, value)
    
    def _insert_recursive(self, node, value):
        """é€’å½’æ’å…¥"""
        if value < node.value:
            if node.left is None:
                node.left = TreeNode(value)
            else:
                self._insert_recursive(node.left, value)
        elif value > node.value:
            if node.right is None:
                node.right = TreeNode(value)
            else:
                self._insert_recursive(node.right, value)
        # å¦‚æœå€¼ç›¸ç­‰ï¼Œä¸æ’å…¥ï¼ˆé¿å…é‡å¤ï¼‰
    
    def search(self, value):
        """æœç´¢èŠ‚ç‚¹"""
        return self._search_recursive(self.root, value)
    
    def _search_recursive(self, node, value):
        """é€’å½’æœç´¢"""
        if not node:
            return False
        
        if value == node.value:
            return True
        elif value < node.value:
            return self._search_recursive(node.left, value)
        else:
            return self._search_recursive(node.right, value)
    
    def find_min(self, node=None):
        """æ‰¾åˆ°æœ€å°å€¼èŠ‚ç‚¹"""
        if node is None:
            node = self.root
        
        if not node:
            return None
        
        while node.left:
            node = node.left
        
        return node.value
    
    def find_max(self, node=None):
        """æ‰¾åˆ°æœ€å¤§å€¼èŠ‚ç‚¹"""
        if node is None:
            node = self.root
        
        if not node:
            return None
        
        while node.right:
            node = node.right
        
        return node.value
    
    def delete(self, value):
        """åˆ é™¤èŠ‚ç‚¹"""
        self.root = self._delete_recursive(self.root, value)
    
    def _delete_recursive(self, node, value):
        """é€’å½’åˆ é™¤"""
        if not node:
            return None
        
        if value < node.value:
            node.left = self._delete_recursive(node.left, value)
        elif value > node.value:
            node.right = self._delete_recursive(node.right, value)
        else:
            # æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹
            
            # æƒ…å†µ1ï¼šå¶å­èŠ‚ç‚¹
            if not node.left and not node.right:
                return None
            
            # æƒ…å†µ2ï¼šåªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹
            if not node.left:
                return node.right
            if not node.right:
                return node.left
            
            # æƒ…å†µ3ï¼šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹
            # æ‰¾åˆ°å³å­æ ‘çš„æœ€å°å€¼ï¼ˆåç»§èŠ‚ç‚¹ï¼‰
            min_value = self.find_min(node.right)
            node.value = min_value
            node.right = self._delete_recursive(node.right, min_value)
        
        return node
    
    def inorder_traversal(self, node=None, result=None):
        """ä¸­åºéå†ï¼ˆæœ‰åºè¾“å‡ºï¼‰"""
        if result is None:
            result = []
        if node is None:
            node = self.root
        
        if node:
            self.inorder_traversal(node.left, result)
            result.append(node.value)
            self.inorder_traversal(node.right, result)
        
        return result
    
    def is_valid_bst(self, node=None, min_val=float('-inf'), max_val=float('inf')):
        """éªŒè¯æ˜¯å¦ä¸ºæœ‰æ•ˆçš„BST"""
        if node is None:
            node = self.root
        
        if not node:
            return True
        
        if node.value <= min_val or node.value >= max_val:
            return False
        
        return (self.is_valid_bst(node.left, min_val, node.value) and
                self.is_valid_bst(node.right, node.value, max_val))


# ä½¿ç”¨äºŒå‰æœç´¢æ ‘
bst = BinarySearchTree()

# æ’å…¥èŠ‚ç‚¹
values = [5, 3, 7, 1, 4, 6, 9]
for val in values:
    bst.insert(val)

print("BSTç»“æ„ï¼š")
#         5
#       /   \
#      3     7
#     / \   / \
#    1   4 6   9

# ä¸­åºéå†ï¼ˆæœ‰åºè¾“å‡ºï¼‰
print("ä¸­åºéå†:", bst.inorder_traversal())  # [1, 3, 4, 5, 6, 7, 9]

# æœç´¢
print(f"\næœç´¢4: {bst.search(4)}")  # True
print(f"æœç´¢8: {bst.search(8)}")    # False

# æœ€å°å€¼å’Œæœ€å¤§å€¼
print(f"\næœ€å°å€¼: {bst.find_min()}")  # 1
print(f"æœ€å¤§å€¼: {bst.find_max()}")    # 9

# éªŒè¯BST
print(f"\næ˜¯å¦ä¸ºæœ‰æ•ˆBST: {bst.is_valid_bst()}")  # True

# åˆ é™¤èŠ‚ç‚¹
bst.delete(3)
print(f"\nåˆ é™¤3åçš„ä¸­åºéå†: {bst.inorder_traversal()}")  # [1, 4, 5, 6, 7, 9]
```

------

### 5.5.5 Javaå®ç°äºŒå‰æœç´¢æ ‘

```
javaå¤åˆ¶class TreeNode {
    int value;
    TreeNode left;
    TreeNode right;
    
    public TreeNode(int value) {
        this.value = value;
        this.left = null;
        this.right = null;
    }
}

public class BinarySearchTree {
    private TreeNode root;
    
    public BinarySearchTree() {
        this.root = null;
    }
    
    // æ’å…¥
    public void insert(int value) {
        root = insertRecursive(root, value);
    }
    
    private TreeNode insertRecursive(TreeNode node, int value) {
        if (node == null) {
            return new TreeNode(value);
        }
        
        if (value < node.value) {
            node.left = insertRecursive(node.left, value);
        } else if (value > node.value) {
            node.right = insertRecursive(node.right, value);
        }
        
        return node;
    }
    
    // æœç´¢
    public boolean search(int value) {
        return searchRecursive(root, value);
    }
    
    private boolean searchRecursive(TreeNode node, int value) {
        if (node == null) {
            return false;
        }
        
        if (value == node.value) {
            return true;
        } else if (value < node.value) {
            return searchRecursive(node.left, value);
        } else {
            return searchRecursive(node.right, value);
        }
    }
    
    // ä¸­åºéå†
    public void inorderTraversal() {
        inorderRecursive(root);
        System.out.println();
    }
    
    private void inorderRecursive(TreeNode node) {
        if (node != null) {
            inorderRecursive(node.left);
            System.out.print(node.value + " ");
            inorderRecursive(node.right);
        }
    }
    
    // æµ‹è¯•
    public static void main(String[] args) {
        BinarySearchTree bst = new BinarySearchTree();
        
        int[] values = {5, 3, 7, 1, 4, 6, 9};
        for (int val : values) {
            bst.insert(val);
        }
        
        System.out.print("ä¸­åºéå†: ");
        bst.inorderTraversal();  // 1 3 4 5 6 7 9
        
        System.out.println("æœç´¢4: " + bst.search(4));  // true
        System.out.println("æœç´¢8: " + bst.search(8));  // false
    }
}
```

------

### 5.5.6 æ ‘çš„åº”ç”¨åœºæ™¯

1. **æ–‡ä»¶ç³»ç»Ÿ**ï¼šç›®å½•ç»“æ„
2. **HTML DOM**ï¼šç½‘é¡µå…ƒç´ å±‚æ¬¡
3. **æ•°æ®åº“ç´¢å¼•**ï¼šBæ ‘ã€B+æ ‘
4. **å†³ç­–æ ‘**ï¼šæœºå™¨å­¦ä¹ 
5. **è¡¨è¾¾å¼æ ‘**ï¼šç¼–è¯‘å™¨
6. **Huffmanç¼–ç **ï¼šæ•°æ®å‹ç¼©

------

## 5.6 å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰ (25åˆ†é’Ÿ)

### 5.6.1 å“ˆå¸Œè¡¨çš„æ¦‚å¿µ

**å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰**é€šè¿‡å“ˆå¸Œå‡½æ•°å°†é”®æ˜ å°„åˆ°æ•°ç»„ç´¢å¼•ï¼Œå®ç°å¿«é€ŸæŸ¥æ‰¾ã€‚

```
bashå¤åˆ¶å“ˆå¸Œè¡¨åŸç†ï¼š
    Key â†’ Hash Function â†’ Index â†’ Value
    
    "apple"  â†’ hash("apple") % 10 â†’ 3 â†’ "red"
    "banana" â†’ hash("banana") % 10 â†’ 7 â†’ "yellow"
    
æ•°ç»„è¡¨ç¤ºï¼š
    Index: 0    1    2    3       4    5    6    7          8    9
    Value: -    -    -    "red"   -    -    -    "yellow"   -    -
```

**å“ˆå¸Œå†²çª**ï¼šä¸åŒçš„é”®æ˜ å°„åˆ°ç›¸åŒçš„ç´¢å¼•

**è§£å†³æ–¹æ³•ï¼š**

1. **é“¾åœ°å€æ³•ï¼ˆChainingï¼‰**ï¼šæ¯ä¸ªç´¢å¼•å­˜å‚¨ä¸€ä¸ªé“¾è¡¨
2. **å¼€æ”¾åœ°å€æ³•ï¼ˆOpen Addressingï¼‰**ï¼šå¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºä½ç½®

------

### 5.6.2 Pythonå®ç°å“ˆå¸Œè¡¨ï¼ˆé“¾åœ°å€æ³•ï¼‰

```
pythonå¤åˆ¶class HashTable:
    """å“ˆå¸Œè¡¨å®ç°ï¼ˆé“¾åœ°å€æ³•ï¼‰"""
    
    def __init__(self, capacity=10):
        self.capacity = capacity
        self.size = 0
        self.buckets = [[] for _ in range(capacity)]
    
    def _hash(self, key):
        """å“ˆå¸Œå‡½æ•°"""
        return hash(key) % self.capacity
    
    def put(self, key, value):
        """æ’å…¥æˆ–æ›´æ–°é”®å€¼å¯¹"""
        index = self._hash(key)
        bucket = self.buckets[index]
        
        # æ£€æŸ¥é”®æ˜¯å¦å·²å­˜åœ¨
        for i, (k, v) in enumerate(bucket):
            if k == key:
                bucket[i] = (key, value)  # æ›´æ–°
                return
        
        # é”®ä¸å­˜åœ¨ï¼Œæ·»åŠ æ–°é¡¹
        bucket.append((key, value))
        self.size += 1
        
        # æ£€æŸ¥è´Ÿè½½å› å­ï¼Œå¿…è¦æ—¶æ‰©å®¹
        if self.size / self.capacity > 0.7:
            self._resize()
    
    def get(self, key):
        """è·å–å€¼"""
        index = self._hash(key)
        bucket = self.buckets[index]
        
        for k, v in bucket:
            if k == key:
                return v
        
        raise KeyError(f"Key '{key}' not found")
    
    def remove(self, key):
        """åˆ é™¤é”®å€¼å¯¹"""
        index = self._hash(key)
        bucket = self.buckets[index]
        
        for i, (k, v) in enumerate(bucket):
            if k == key:
                del bucket[i]
                self.size -= 1
                return
        
        raise KeyError(f"Key '{key}' not found")
    
    def contains(self, key):
        """æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨"""
        try:
            self.get(key)
            return True
        except KeyError:
            return False
    
    def _resize(self):
        """æ‰©å®¹"""
        old_buckets = self.buckets
        self.capacity *= 2
        self.buckets = [[] for _ in range(self.capacity)]
        self.size = 0
        
        # é‡æ–°æ’å…¥æ‰€æœ‰å…ƒç´ 
        for bucket in old_buckets:
            for key, value in bucket:
                self.put(key, value)
    
    def keys(self):
        """è¿”å›æ‰€æœ‰é”®"""
        result = []
        for bucket in self.buckets:
            for key, value in bucket:
                result.append(key)
        return result
    
    def values(self):
        """è¿”å›æ‰€æœ‰å€¼"""
        result = []
        for bucket in self.buckets:
            for key, value in bucket:
                result.append(value)
        return result
    
    def items(self):
        """è¿”å›æ‰€æœ‰é”®å€¼å¯¹"""
        result = []
        for bucket in self.buckets:
            for item in bucket:
                result.append(item)
        return result
    
    def __len__(self):
        return self.size
    
    def __str__(self):
        items = self.items()
        return f"HashTable({dict(items)})"


# ä½¿ç”¨å“ˆå¸Œè¡¨
ht = HashTable()

# æ’å…¥
ht.put("apple", "red")
ht.put("banana", "yellow")
ht.put("grape", "purple")
ht.put("orange", "orange")

print(ht)  # HashTable({'apple': 'red', 'banana': 'yellow', ...})

# è·å–
print(f"appleçš„é¢œè‰²: {ht.get('apple')}")  # red

# æ›´æ–°
ht.put("apple", "green")
print(f"appleçš„æ–°é¢œè‰²: {ht.get('apple')}")  # green

# æ£€æŸ¥
print(f"åŒ…å«banana: {ht.contains('banana')}")  # True
print(f"åŒ…å«cherry: {ht.contains('cherry')}")  # False

# åˆ é™¤
ht.remove("banana")
print(f"åˆ é™¤ååŒ…å«banana: {ht.contains('banana')}")  # False

# éå†
print(f"\næ‰€æœ‰é”®: {ht.keys()}")
print(f"æ‰€æœ‰å€¼: {ht.values()}")
print(f"å¤§å°: {len(ht)}")
```

------

### 5.6.3 å“ˆå¸Œè¡¨çš„åº”ç”¨

#### åº”ç”¨1ï¼šå•è¯é¢‘ç‡ç»Ÿè®¡

```
pythonå¤åˆ¶def word_frequency(text):
    """ç»Ÿè®¡å•è¯é¢‘ç‡"""
    # ä½¿ç”¨Pythonå†…ç½®å­—å…¸ï¼ˆåŸºäºå“ˆå¸Œè¡¨ï¼‰
    frequency = {}
    
    words = text.lower().split()
    
    for word in words:
        # ç§»é™¤æ ‡ç‚¹ç¬¦å·
        word = word.strip('.,!?;:"\'')
        if word:
            frequency[word] = frequency.get(word, 0) + 1
    
    return frequency


text = """
Python is a great programming language. 
Python is easy to learn. 
Programming in Python is fun.
"""

freq = word_frequency(text)
print("å•è¯é¢‘ç‡:")
for word, count in sorted(freq.items(), key=lambda x: x[1], reverse=True):
    print(f"  {word}: {count}")
```

#### åº”ç”¨2ï¼šä¸¤æ•°ä¹‹å’Œï¼ˆLeetCodeç»å…¸é¢˜ï¼‰

```
pythonå¤åˆ¶def two_sum(nums, target):
    """
    æ‰¾åˆ°æ•°ç»„ä¸­ä¸¤ä¸ªæ•°ï¼Œä½¿å…¶å’Œç­‰äºç›®æ ‡å€¼
    è¿”å›è¿™ä¸¤ä¸ªæ•°çš„ç´¢å¼•
    """
    seen = {}  # å“ˆå¸Œè¡¨ï¼šå€¼ -> ç´¢å¼•
    
    for i, num in enumerate(nums):
        complement = target - num
        
        if complement in seen:
            return [seen[complement], i]
        
        seen[num] = i
    
    return None


# æµ‹è¯•
nums = [2, 7, 11, 15]
target = 9
result = two_sum(nums, target)
print(f"ä¸¤æ•°ä¹‹å’Œ: {result}")  # [0, 1]
print(f"éªŒè¯: {nums[result[0]]} + {nums[result[1]]} = {target}")
```

#### åº”ç”¨3ï¼šLRUç¼“å­˜

```
pythonå¤åˆ¶from collections import OrderedDict

class LRUCache:
    """æœ€è¿‘æœ€å°‘ä½¿ç”¨ç¼“å­˜"""
    
    def __init__(self, capacity):
        self.cache = OrderedDict()
        self.capacity = capacity
    
    def get(self, key):
        """è·å–å€¼"""
        if key not in self.cache:
            return -1
        
        # ç§»åŠ¨åˆ°æœ«å°¾ï¼ˆæœ€è¿‘ä½¿ç”¨ï¼‰
        self.cache.move_to_end(key)
        return self.cache[key]
    
    def put(self, key, value):
        """æ’å…¥æˆ–æ›´æ–°"""
        if key in self.cache:
            # æ›´æ–°å¹¶ç§»åŠ¨åˆ°æœ«å°¾
            self.cache.move_to_end(key)
        
        self.cache[key] = value
        
        # å¦‚æœè¶…è¿‡å®¹é‡ï¼Œåˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„ï¼ˆå¼€å¤´ï¼‰
        if len(self.cache) > self.capacity:
            self.cache.popitem(last=False)
    
    def __str__(self):
        return f"LRUCache({dict(self.cache)})"


# ä½¿ç”¨LRUç¼“å­˜
cache = LRUCache(3)

cache.put(1, "one")
cache.put(2, "two")
cache.put(3, "three")
print(cache)  # LRUCache({1: 'one', 2: 'two', 3: 'three'})

cache.get(1)  # è®¿é—®1ï¼Œç§»åˆ°æœ€å
cache.put(4, "four")  # æ·»åŠ 4ï¼Œåˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„2
print(cache)  # LRUCache({3: 'three', 1: 'one', 4: 'four'})
```

------

## 5.7 ç®—æ³•å¤æ‚åº¦åˆ†æ (20åˆ†é’Ÿ)

### 5.7.1 æ—¶é—´å¤æ‚åº¦

**æ—¶é—´å¤æ‚åº¦**è¡¨ç¤ºç®—æ³•æ‰§è¡Œæ—¶é—´éšè¾“å…¥è§„æ¨¡å¢é•¿çš„è¶‹åŠ¿ã€‚

```
scsså¤åˆ¶å¸¸è§æ—¶é—´å¤æ‚åº¦ï¼ˆä»å¿«åˆ°æ…¢ï¼‰ï¼š
O(1)        < O(log n)  < O(n)      < O(n log n) < O(nÂ²)     < O(2^n)    < O(n!)
å¸¸æ•°æ—¶é—´      å¯¹æ•°æ—¶é—´     çº¿æ€§æ—¶é—´     çº¿æ€§å¯¹æ•°æ—¶é—´   å¹³æ–¹æ—¶é—´      æŒ‡æ•°æ—¶é—´     é˜¶ä¹˜æ—¶é—´

ç¤ºä¾‹ï¼š
O(1):       è®¿é—®æ•°ç»„å…ƒç´ 
O(log n):   äºŒåˆ†æŸ¥æ‰¾
O(n):       éå†æ•°ç»„
O(n log n): å½’å¹¶æ’åºã€å¿«é€Ÿæ’åº
O(nÂ²):      å†’æ³¡æ’åºã€é€‰æ‹©æ’åº
O(2^n):     é€’å½’è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—
O(n!):      æ—…è¡Œå•†é—®é¢˜ï¼ˆæš´åŠ›è§£æ³•ï¼‰
```

------

### 5.7.2 å¤æ‚åº¦ç¤ºä¾‹

```
pythonå¤åˆ¶# O(1) - å¸¸æ•°æ—¶é—´
def get_first_element(arr):
    return arr[0]  # æ— è®ºæ•°ç»„å¤šå¤§ï¼Œéƒ½æ˜¯ä¸€æ¬¡æ“ä½œ


# O(n) - çº¿æ€§æ—¶é—´
def find_max(arr):
    max_val = arr[0]
    for num in arr:  # éå†nä¸ªå…ƒç´ 
        if num > max_val:
            max_val = num
    return max_val


# O(log n) - å¯¹æ•°æ—¶é—´
def binary_search(arr, target):
    left, right = 0, len(arr) - 1
    
    while left <= right:
        mid = (left + right) // 2
        if arr[mid] == target:
            return mid
        elif arr[mid] < target:
            left = mid + 1
        else:
            right = mid - 1
    
    return -1


# O(n log n) - çº¿æ€§å¯¹æ•°æ—¶é—´
def merge_sort(arr):
    if len(arr) <= 1:
        return arr
    
    mid = len(arr) // 2
    left = merge_sort(arr[:mid])    # log n å±‚é€’å½’
    right = merge_sort(arr[mid:])
    
    return merge(left, right)  # æ¯å±‚O(n)åˆå¹¶

def merge(left, right):
    result = []
    i = j = 0
    
    while i < len(left) and j < len(right):
        if left[i] <= right[j]:
            result.append(left[i])
            i += 1
        else:
            result.append(right[j])
            j += 1
    
    result.extend(left[i:])
    result.extend(right[j:])
    return result


# O(nÂ²) - å¹³æ–¹æ—¶é—´
def bubble_sort(arr):
    n = len(arr)
    for i in range(n):          # å¤–å±‚å¾ªç¯næ¬¡
        for j in range(n - i - 1):  # å†…å±‚å¾ªç¯næ¬¡
            if arr[j] > arr[j + 1]:
                arr[j], arr[j + 1] = arr[j + 1], arr[j]
    return arr


# O(2^n) - æŒ‡æ•°æ—¶é—´
def fibonacci_recursive(n):
    if n <= 1:
        return n
    return fibonacci_recursive(n - 1) + fibonacci_recursive(n - 2)


# ä¼˜åŒ–ä¸ºO(n) - ä½¿ç”¨åŠ¨æ€è§„åˆ’
def fibonacci_dp(n):
    if n <= 1:
        return n
    
    dp = [0] * (n + 1)
    dp[1] = 1
    
    for i in range(2, n + 1):
        dp[i] = dp[i - 1] + dp[i - 2]
    
    return dp[n]


# æµ‹è¯•å’Œæ¯”è¾ƒ
import time

def measure_time(func, *args):
    start = time.time()
    result = func(*args)
    end = time.time()
    return result, end - start

# æ¯”è¾ƒæ–æ³¢é‚£å¥‘ç®—æ³•
n = 30
result1, time1 = measure_time(fibonacci_recursive, n)
result2, time2 = measure_time(fibonacci_dp, n)

print(f"é€’å½’æ–¹æ³•: ç»“æœ={result1}, æ—¶é—´={time1:.4f}ç§’")
print(f"åŠ¨æ€è§„åˆ’: ç»“æœ={result2}, æ—¶é—´={time2:.6f}ç§’")
print(f"é€Ÿåº¦æå‡: {time1/time2:.0f}å€")
```

------

### 5.7.3 ç©ºé—´å¤æ‚åº¦

**ç©ºé—´å¤æ‚åº¦**è¡¨ç¤ºç®—æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€çš„é¢å¤–å†…å­˜ç©ºé—´ã€‚

```
pythonå¤åˆ¶# O(1) - å¸¸æ•°ç©ºé—´
def sum_array(arr):
    total = 0  # åªä½¿ç”¨ä¸€ä¸ªå˜é‡
    for num in arr:
        total += num
    return total


# O(n) - çº¿æ€§ç©ºé—´
def reverse_array(arr):
    return arr[::-1]  # åˆ›å»ºæ–°æ•°ç»„ï¼Œå¤§å°ä¸ºn


# O(n) - é€’å½’è°ƒç”¨æ ˆ
def factorial_recursive(n):
    """
    é€’å½’æ·±åº¦ä¸ºnï¼Œè°ƒç”¨æ ˆå ç”¨O(n)ç©ºé—´
    """
    if n <= 1:
        return 1
    return n * factorial_recursive(n - 1)


# O(1) - è¿­ä»£ç‰ˆæœ¬
def factorial_iterative(n):
    """
    åªä½¿ç”¨å¸¸æ•°ä¸ªå˜é‡
    """
    result = 1
    for i in range(2, n + 1):
        result *= i
    return result


# O(nÂ²) - äºŒç»´æ•°ç»„
def create_matrix(n):
    """
    åˆ›å»ºnÃ—nçŸ©é˜µï¼Œç©ºé—´å¤æ‚åº¦O(nÂ²)
    """
    return [[0] * n for _ in range(n)]


# ç©ºé—´ä¼˜åŒ–ç¤ºä¾‹ï¼šåŸåœ°ç®—æ³•
def reverse_in_place(arr):
    """
    åŸåœ°åè½¬æ•°ç»„ï¼Œç©ºé—´å¤æ‚åº¦O(1)
    """
    left, right = 0, len(arr) - 1
    while left < right:
        arr[left], arr[right] = arr[right], arr[left]
        left += 1
        right -= 1
    return arr


# æµ‹è¯•
arr = [1, 2, 3, 4, 5]
print(f"åŸæ•°ç»„: {arr}")
reverse_in_place(arr)
print(f"åè½¬å: {arr}")
```

------

### 5.7.4 å¤æ‚åº¦å¯¹æ¯”è¡¨

| ç®—æ³•         | æœ€å¥½       | å¹³å‡       | æœ€å       | ç©ºé—´     |
| ------------ | ---------- | ---------- | ---------- | -------- |
| **å†’æ³¡æ’åº** | O(n)       | O(nÂ²)      | O(nÂ²)      | O(1)     |
| **é€‰æ‹©æ’åº** | O(nÂ²)      | O(nÂ²)      | O(nÂ²)      | O(1)     |
| **æ’å…¥æ’åº** | O(n)       | O(nÂ²)      | O(nÂ²)      | O(1)     |
| **å½’å¹¶æ’åº** | O(n log n) | O(n log n) | O(n log n) | O(n)     |
| **å¿«é€Ÿæ’åº** | O(n log n) | O(n log n) | O(nÂ²)      | O(log n) |
| **å †æ’åº**   | O(n log n) | O(n log n) | O(n log n) | O(1)     |
| **äºŒåˆ†æŸ¥æ‰¾** | O(1)       | O(log n)   | O(log n)   | O(1)     |
| **çº¿æ€§æŸ¥æ‰¾** | O(1)       | O(n)       | O(n)       | O(1)     |

------

### 5.7.5 å¦‚ä½•åˆ†æå¤æ‚åº¦

```
pythonå¤åˆ¶def analyze_complexity():
    """
    å¤æ‚åº¦åˆ†ææ­¥éª¤ï¼š
    1. æ‰¾å‡ºåŸºæœ¬æ“ä½œï¼ˆé€šå¸¸æ˜¯æœ€å†…å±‚å¾ªç¯ï¼‰
    2. è®¡ç®—åŸºæœ¬æ“ä½œæ‰§è¡Œæ¬¡æ•°
    3. ç”¨å¤§Oè¡¨ç¤ºæ³•ç®€åŒ–
    """
    pass

# ç¤ºä¾‹1ï¼šå•å±‚å¾ªç¯
def example1(n):
    for i in range(n):      # æ‰§è¡Œnæ¬¡
        print(i)            # O(1)æ“ä½œ
    # æ€»å¤æ‚åº¦ï¼šO(n)


# ç¤ºä¾‹2ï¼šåµŒå¥—å¾ªç¯
def example2(n):
    for i in range(n):          # å¤–å±‚næ¬¡
        for j in range(n):      # å†…å±‚næ¬¡
            print(i, j)         # O(1)æ“ä½œ
    # æ€»å¤æ‚åº¦ï¼šO(n) Ã— O(n) = O(nÂ²)


# ç¤ºä¾‹3ï¼šå¾ªç¯æ¬¡æ•°å‡åŠ
def example3(n):
    i = n
    while i > 0:
        print(i)
        i = i // 2          # æ¯æ¬¡å‡åŠ
    # æ‰§è¡Œæ¬¡æ•°ï¼šlogâ‚‚(n)
    # æ€»å¤æ‚åº¦ï¼šO(log n)


# ç¤ºä¾‹4ï¼šå¤šä¸ªç‹¬ç«‹å¾ªç¯
def example4(n):
    for i in range(n):      # O(n)
        print(i)
    
    for j in range(n):      # O(n)
        print(j)
    
    for k in range(n):      # O(n)
        print(k)
    
    # æ€»å¤æ‚åº¦ï¼šO(n) + O(n) + O(n) = O(3n) = O(n)


# ç¤ºä¾‹5ï¼šä¸åŒè§„æ¨¡çš„åµŒå¥—
def example5(n, m):
    for i in range(n):      # næ¬¡
        for j in range(m):  # mæ¬¡
            print(i, j)
    # æ€»å¤æ‚åº¦ï¼šO(n Ã— m)


# ç¤ºä¾‹6ï¼šé€’å½’åˆ†æ
def example6(n):
    if n <= 1:
        return 1
    return example6(n // 2) + example6(n // 2)
    # é€’å½’æ ‘æ·±åº¦ï¼šlog n
    # æ¯å±‚èŠ‚ç‚¹æ•°ï¼š2^å±‚æ•°
    # æ€»å¤æ‚åº¦ï¼šO(n)
```

------

## 5.8 å®æˆ˜é¡¹ç›®ï¼šä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ (40åˆ†é’Ÿ)

### 5.8.1 é¡¹ç›®éœ€æ±‚

åˆ›å»ºä¸€ä¸ªä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼Œæ”¯æŒï¼š

1. æ·»åŠ ä»»åŠ¡ï¼ˆå¸¦ä¼˜å…ˆçº§ï¼‰
2. æ‰§è¡Œæœ€é«˜ä¼˜å…ˆçº§ä»»åŠ¡
3. æŸ¥çœ‹å¾…å¤„ç†ä»»åŠ¡
4. ä»»åŠ¡å†å²è®°å½•
5. ç»Ÿè®¡ä¿¡æ¯

------

### 5.8.2 å®Œæ•´å®ç°

```python
import time
from datetime import datetime
from collections import deque
import heapq


class Task:
    """ä»»åŠ¡ç±»"""
    
    # ä»»åŠ¡çŠ¶æ€
    PENDING = "å¾…å¤„ç†"
    RUNNING = "æ‰§è¡Œä¸­"
    COMPLETED = "å·²å®Œæˆ"
    FAILED = "å¤±è´¥"
    
    def __init__(self, task_id, name, priority=0, duration=1):
        self.task_id = task_id
        self.name = name
        self.priority = priority  # ä¼˜å…ˆçº§ï¼ˆæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼‰
        self.duration = duration  # é¢„è®¡æ‰§è¡Œæ—¶é—´ï¼ˆç§’ï¼‰
        self.status = Task.PENDING
        self.created_at = datetime.now()
        self.started_at = None
        self.completed_at = None
        self.result = None
    
    def __lt__(self, other):
        """ç”¨äºä¼˜å…ˆé˜Ÿåˆ—æ¯”è¾ƒï¼ˆä¼˜å…ˆçº§é«˜çš„åœ¨å‰ï¼‰"""
        return self.priority > other.priority
    
    def execute(self):
        """æ‰§è¡Œä»»åŠ¡"""
        self.status = Task.RUNNING
        self.started_at = datetime.now()
        
        print(f"[{self.started_at.strftime('%H:%M:%S')}] å¼€å§‹æ‰§è¡Œä»»åŠ¡: {self.name}")
        
        try:
            # æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œ
            time.sleep(self.duration)
            
            self.status = Task.COMPLETED
            self.completed_at = datetime.now()
            self.result = f"ä»»åŠ¡ {self.name} æˆåŠŸå®Œæˆ"
            
            print(f"[{self.completed_at.strftime('%H:%M:%S')}] å®Œæˆä»»åŠ¡: {self.name}")
            return True
            
        except Exception as e:
            self.status = Task.FAILED
            self.completed_at = datetime.now()
            self.result = f"ä»»åŠ¡å¤±è´¥: {str(e)}"
            print(f"[{self.completed_at.strftime('%H:%M:%S')}] ä»»åŠ¡å¤±è´¥: {self.name}")
            return False
    
    def __str__(self):
        return (f"Task(id={self.task_id}, name='{self.name}', "
                f"priority={self.priority}, status={self.status})")
    
    def get_info(self):
        """è·å–ä»»åŠ¡è¯¦ç»†ä¿¡æ¯"""
        info = {
            'ID': self.task_id,
            'åç§°': self.name,
            'ä¼˜å…ˆçº§': self.priority,
            'çŠ¶æ€': self.status,
            'åˆ›å»ºæ—¶é—´': self.created_at.strftime('%Y-%m-%d %H:%M:%S'),
        }
        
        if self.started_at:
            info['å¼€å§‹æ—¶é—´'] = self.started_at.strftime('%Y-%m-%d %H:%M:%S')
        
        if self.completed_at:
            info['å®Œæˆæ—¶é—´'] = self.completed_at.strftime('%Y-%m-%d %H:%M:%S')
            elapsed = (self.completed_at - self.started_at).total_seconds()
            info['æ‰§è¡Œæ—¶é•¿'] = f"{elapsed:.2f}ç§’"
        
        if self.result:
            info['ç»“æœ'] = self.result
        
        return info


class TaskScheduler:
    """ä»»åŠ¡è°ƒåº¦å™¨"""
    
    def __init__(self):
        self.task_queue = []  # ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰
        self.history = deque(maxlen=100)  # å†å²è®°å½•ï¼ˆæœ€å¤šä¿å­˜100æ¡ï¼‰
        self.task_counter = 0
        self.stats = {
            'total_tasks': 0,
            'completed_tasks': 0,
            'failed_tasks': 0,
            'total_execution_time': 0
        }
    
    def add_task(self, name, priority=0, duration=1):
        """æ·»åŠ ä»»åŠ¡"""
        self.task_counter += 1
        task = Task(self.task_counter, name, priority, duration)
        heapq.heappush(self.task_queue, task)
        self.stats['total_tasks'] += 1
        
        print(f"âœ“ æ·»åŠ ä»»åŠ¡: {task}")
        return task
    
    def execute_next(self):
        """æ‰§è¡Œä¸‹ä¸€ä¸ªæœ€é«˜ä¼˜å…ˆçº§ä»»åŠ¡"""
        if not self.task_queue:
            print("âš  æ²¡æœ‰å¾…å¤„ç†çš„ä»»åŠ¡")
            return None
        
        task = heapq.heappop(self.task_queue)
        success = task.execute()
        
        # æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        if success:
            self.stats['completed_tasks'] += 1
        else:
            self.stats['failed_tasks'] += 1
        
        if task.started_at and task.completed_at:
            elapsed = (task.completed_at - task.started_at).total_seconds()
            self.stats['total_execution_time'] += elapsed
        
        # æ·»åŠ åˆ°å†å²è®°å½•
        self.history.append(task)
        
        return task
    
    def execute_all(self):
        """æ‰§è¡Œæ‰€æœ‰å¾…å¤„ç†ä»»åŠ¡"""
        print("\n" + "="*60)
        print("å¼€å§‹æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡...")
        print("="*60 + "\n")
        
        while self.task_queue:
            self.execute_next()
            print()  # ç©ºè¡Œåˆ†éš”
        
        print("="*60)
        print("æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼")
        print("="*60 + "\n")
    
    def show_pending_tasks(self):
        """æ˜¾ç¤ºå¾…å¤„ç†ä»»åŠ¡"""
        if not self.task_queue:
            print("æ²¡æœ‰å¾…å¤„ç†çš„ä»»åŠ¡")
            return
        
        print("\nå¾…å¤„ç†ä»»åŠ¡åˆ—è¡¨ï¼š")
        print("-" * 60)
        
        # å¤åˆ¶é˜Ÿåˆ—å¹¶æ’åºï¼ˆä¸å½±å“åŸé˜Ÿåˆ—ï¼‰
        tasks = sorted(self.task_queue, reverse=True)
        
        for i, task in enumerate(tasks, 1):
            print(f"{i}. {task.name}")
            print(f"   ä¼˜å…ˆçº§: {task.priority} | é¢„è®¡æ—¶é•¿: {task.duration}ç§’")
            print(f"   åˆ›å»ºæ—¶é—´: {task.created_at.strftime('%H:%M:%S')}")
            print()
    
    def show_history(self, limit=10):
        """æ˜¾ç¤ºå†å²è®°å½•"""
        if not self.history:
            print("æ²¡æœ‰å†å²è®°å½•")
            return
        
        print(f"\næœ€è¿‘ {min(limit, len(self.history))} æ¡å†å²è®°å½•ï¼š")
        print("-" * 60)
        
        for task in list(self.history)[-limit:]:
            info = task.get_info()
            print(f"ä»»åŠ¡ #{info['ID']}: {info['åç§°']}")
            print(f"  çŠ¶æ€: {info['çŠ¶æ€']} | ä¼˜å…ˆçº§: {info['ä¼˜å…ˆçº§']}")
            if 'æ‰§è¡Œæ—¶é•¿' in info:
                print(f"  æ‰§è¡Œæ—¶é•¿: {info['æ‰§è¡Œæ—¶é•¿']}")
            print()
    
    def show_statistics(self):
        """æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯"""
        print("\nç»Ÿè®¡ä¿¡æ¯ï¼š")
        print("="*60)
        print(f"æ€»ä»»åŠ¡æ•°: {self.stats['total_tasks']}")
        print(f"å·²å®Œæˆ: {self.stats['completed_tasks']}")
        print(f"å¤±è´¥: {self.stats['failed_tasks']}")
        print(f"å¾…å¤„ç†: {len(self.task_queue)}")
        
        if self.stats['completed_tasks'] > 0:
            avg_time = self.stats['total_execution_time'] / self.stats['completed_tasks']
            print(f"å¹³å‡æ‰§è¡Œæ—¶é—´: {avg_time:.2f}ç§’")
        
        if self.stats['total_tasks'] > 0:
            completion_rate = (self.stats['completed_tasks'] / 
                             self.stats['total_tasks'] * 100)
            print(f"å®Œæˆç‡: {completion_rate:.1f}%")
        
        print("="*60 + "\n")
    
    def clear_history(self):
        """æ¸…ç©ºå†å²è®°å½•"""
        self.history.clear()
        print("âœ“ å†å²è®°å½•å·²æ¸…ç©º")
    
    def get_task_by_id(self, task_id):
        """æ ¹æ®IDæŸ¥æ‰¾ä»»åŠ¡"""
        # åœ¨å¾…å¤„ç†é˜Ÿåˆ—ä¸­æŸ¥æ‰¾
        for task in self.task_queue:
            if task.task_id == task_id:
                return task
        
        # åœ¨å†å²è®°å½•ä¸­æŸ¥æ‰¾
        for task in self.history:
            if task.task_id == task_id:
                return task
        
        return None


# ==================== ä½¿ç”¨ç¤ºä¾‹ ====================

def demo_basic_usage():
    """åŸºæœ¬ä½¿ç”¨æ¼”ç¤º"""
    print("\n" + "="*60)
    print("ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ - åŸºæœ¬ä½¿ç”¨æ¼”ç¤º")
    print("="*60 + "\n")
    
    scheduler = TaskScheduler()
    
    # æ·»åŠ ä»»åŠ¡
    scheduler.add_task("å‘é€é‚®ä»¶", priority=3, duration=0.5)
    scheduler.add_task("ç”ŸæˆæŠ¥å‘Š", priority=5, duration=1)
    scheduler.add_task("å¤‡ä»½æ•°æ®", priority=1, duration=0.8)
    scheduler.add_task("æ›´æ–°æ•°æ®åº“", priority=4, duration=0.6)
    scheduler.add_task("æ¸…ç†ç¼“å­˜", priority=2, duration=0.3)
    
    print()
    
    # æ˜¾ç¤ºå¾…å¤„ç†ä»»åŠ¡
    scheduler.show_pending_tasks()
    
    # æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡
    scheduler.execute_all()
    
    # æ˜¾ç¤ºå†å²è®°å½•
    scheduler.show_history()
    
    # æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
    scheduler.show_statistics()


def demo_interactive():
    """äº¤äº’å¼æ¼”ç¤º"""
    print("\n" + "="*60)
    print("ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ - äº¤äº’å¼æ¼”ç¤º")
    print("="*60 + "\n")
    
    scheduler = TaskScheduler()
    
    while True:
        print("\nè¯·é€‰æ‹©æ“ä½œï¼š")
        print("1. æ·»åŠ ä»»åŠ¡")
        print("2. æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡")
        print("3. æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡")
        print("4. æŸ¥çœ‹å¾…å¤„ç†ä»»åŠ¡")
        print("5. æŸ¥çœ‹å†å²è®°å½•")
        print("6. æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯")
        print("7. æ¸…ç©ºå†å²è®°å½•")
        print("0. é€€å‡º")
        
        choice = input("\nè¯·è¾“å…¥é€‰é¡¹ (0-7): ").strip()
        
        if choice == '1':
            name = input("ä»»åŠ¡åç§°: ").strip()
            try:
                priority = int(input("ä¼˜å…ˆçº§ (0-10): ").strip())
                duration = float(input("é¢„è®¡æ—¶é•¿(ç§’): ").strip())
                scheduler.add_task(name, priority, duration)
            except ValueError:
                print("âš  è¾“å…¥æ ¼å¼é”™è¯¯")
        
        elif choice == '2':
            scheduler.execute_next()
        
        elif choice == '3':
            scheduler.execute_all()
        
        elif choice == '4':
            scheduler.show_pending_tasks()
        
        elif choice == '5':
            scheduler.show_history()
        
        elif choice == '6':
            scheduler.show_statistics()
        
        elif choice == '7':
            scheduler.clear_history()
        
        elif choice == '0':
            print("\næ„Ÿè°¢ä½¿ç”¨ï¼å†è§ï¼")
            break
        
        else:
            print("âš  æ— æ•ˆé€‰é¡¹ï¼Œè¯·é‡æ–°è¾“å…¥")


def demo_advanced():
    """é«˜çº§åŠŸèƒ½æ¼”ç¤º"""
    print("\n" + "="*60)
    print("ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ - é«˜çº§åŠŸèƒ½æ¼”ç¤º")
    print("="*60 + "\n")
    
    scheduler = TaskScheduler()
    
    # æ‰¹é‡æ·»åŠ ä»»åŠ¡
    tasks_data = [
        ("æ•°æ®é‡‡é›†", 8, 0.5),
        ("æ•°æ®æ¸…æ´—", 7, 0.8),
        ("æ•°æ®åˆ†æ", 6, 1.2),
        ("ç”Ÿæˆå›¾è¡¨", 5, 0.6),
        ("å‘é€æŠ¥å‘Š", 9, 0.4),
        ("å½’æ¡£æ•°æ®", 3, 0.7),
    ]
    
    print("æ‰¹é‡æ·»åŠ ä»»åŠ¡...")
    for name, priority, duration in tasks_data:
        scheduler.add_task(name, priority, duration)
    
    print()
    
    # æ˜¾ç¤ºä»»åŠ¡é˜Ÿåˆ—
    scheduler.show_pending_tasks()
    
    # é€ä¸ªæ‰§è¡Œå¹¶æ˜¾ç¤ºè¿›åº¦
    total = len(scheduler.task_queue)
    print(f"\nå¼€å§‹æ‰§è¡Œ {total} ä¸ªä»»åŠ¡...\n")
    
    for i in range(total):
        print(f"è¿›åº¦: {i+1}/{total}")
        scheduler.execute_next()
        print()
    
    # æœ€ç»ˆç»Ÿè®¡
    scheduler.show_statistics()
    scheduler.show_history()


# ==================== è¿è¡Œæ¼”ç¤º ====================

if __name__ == "__main__":
    # è¿è¡ŒåŸºæœ¬æ¼”ç¤º
    demo_basic_usage()
    
    # è¿è¡Œé«˜çº§æ¼”ç¤º
    # demo_advanced()
    
    # è¿è¡Œäº¤äº’å¼æ¼”ç¤ºï¼ˆå–æ¶ˆæ³¨é‡Šä»¥ä½¿ç”¨ï¼‰
    # demo_interactive()
```

------

### 5.8.3 é¡¹ç›®æ‰©å±•å»ºè®®

```python
# æ‰©å±•1ï¼šä»»åŠ¡ä¾èµ–å…³ç³»
class DependentTask(Task):
    """æ”¯æŒä¾èµ–å…³ç³»çš„ä»»åŠ¡"""
    def __init__(self, task_id, name, priority=0, duration=1, dependencies=None):
        super().__init__(task_id, name, priority, duration)
        self.dependencies = dependencies or []  # ä¾èµ–çš„ä»»åŠ¡IDåˆ—è¡¨
    
    def can_execute(self, completed_tasks):
        """æ£€æŸ¥æ˜¯å¦å¯ä»¥æ‰§è¡Œï¼ˆæ‰€æœ‰ä¾èµ–ä»»åŠ¡å·²å®Œæˆï¼‰"""
        return all(dep_id in completed_tasks for dep_id in self.dependencies)


# æ‰©å±•2ï¼šå®šæ—¶ä»»åŠ¡
from datetime import datetime, timedelta

class ScheduledTask(Task):
    """å®šæ—¶ä»»åŠ¡"""
    def __init__(self, task_id, name, priority=0, duration=1, scheduled_time=None):
        super().__init__(task_id, name, priority, duration)
        self.scheduled_time = scheduled_time or datetime.now()
    
    def is_ready(self):
        """æ£€æŸ¥æ˜¯å¦åˆ°è¾¾æ‰§è¡Œæ—¶é—´"""
        return datetime.now() >= self.scheduled_time


# æ‰©å±•3ï¼šé‡è¯•æœºåˆ¶
class RetryableTask(Task):
    """æ”¯æŒé‡è¯•çš„ä»»åŠ¡"""
    def __init__(self, task_id, name, priority=0, duration=1, max_retries=3):
        super().__init__(task_id, name, priority, duration)
        self.max_retries = max_retries
        self.retry_count = 0
    
    def execute(self):
        """æ‰§è¡Œä»»åŠ¡ï¼ˆæ”¯æŒé‡è¯•ï¼‰"""
        while self.retry_count < self.max_retries:
            try:
                return super().execute()
            except Exception as e:
                self.retry_count += 1
                if self.retry_count >= self.max_retries:
                    self.status = Task.FAILED
                    return False
                print(f"ä»»åŠ¡å¤±è´¥ï¼Œé‡è¯• {self.retry_count}/{self.max_retries}...")


# æ‰©å±•4ï¼šä»»åŠ¡åˆ†ç»„
class TaskGroup:
    """ä»»åŠ¡ç»„"""
    def __init__(self, name):
        self.name = name
        self.tasks = []
    
    def add_task(self, task):
        self.tasks.append(task)
    
    def execute_all(self):
        """æ‰§è¡Œç»„å†…æ‰€æœ‰ä»»åŠ¡"""
        for task in self.tasks:
            task.execute()
```

------

## ğŸ“š è¯¾ç¨‹æ€»ç»“

### æœ¬èŠ‚è¯¾å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ

âœ… **æ ˆï¼ˆStackï¼‰**

- åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰
- åº”ç”¨ï¼šæ‹¬å·åŒ¹é…ã€è¡¨è¾¾å¼æ±‚å€¼ã€å‡½æ•°è°ƒç”¨æ ˆ

âœ… **é˜Ÿåˆ—ï¼ˆQueueï¼‰**

- å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰
- åº”ç”¨ï¼šBFSã€æ‰“å°é˜Ÿåˆ—ã€ä»»åŠ¡è°ƒåº¦

âœ… **é“¾è¡¨ï¼ˆLinked Listï¼‰**

- åŠ¨æ€å¤§å°ã€é«˜æ•ˆæ’å…¥åˆ é™¤
- å•å‘é“¾è¡¨ã€åŒå‘é“¾è¡¨

âœ… **æ ‘ï¼ˆTreeï¼‰**

- å±‚æ¬¡ç»“æ„
- äºŒå‰æ ‘ã€äºŒå‰æœç´¢æ ‘
- éå†ï¼šå‰åºã€ä¸­åºã€ååºã€å±‚åº

âœ… **å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰**

- O(1)æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤
- å“ˆå¸Œå†²çªè§£å†³

âœ… **ç®—æ³•å¤æ‚åº¦**

- æ—¶é—´å¤æ‚åº¦ï¼šO(1), O(log n), O(n), O(n log n), O(nÂ²)
- ç©ºé—´å¤æ‚åº¦åˆ†æ

âœ… **å®æˆ˜é¡¹ç›®**

- ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ
- ç»¼åˆè¿ç”¨å¤šç§æ•°æ®ç»“æ„

------

## ğŸ¯ è¯¾åä½œä¸š

### ä½œä¸š1ï¼šå®ç°æ ˆçš„æœ€å°å€¼åŠŸèƒ½ â­â­â­

è®¾è®¡ä¸€ä¸ªæ ˆï¼Œæ”¯æŒpushã€popã€topæ“ä½œï¼Œå¹¶èƒ½åœ¨O(1)æ—¶é—´å†…è·å–æ ˆä¸­æœ€å°å…ƒç´ ã€‚

```python
class MinStack:
    def __init__(self):
        # TODO: å®ç°åˆå§‹åŒ–
        pass
    
    def push(self, val):
        # TODO: å‹æ ˆ
        pass
    
    def pop(self):
        # TODO: å‡ºæ ˆ
        pass
    
    def top(self):
        # TODO: è·å–æ ˆé¡¶å…ƒç´ 
        pass
    
    def get_min(self):
        # TODO: è·å–æœ€å°å€¼ï¼ˆO(1)æ—¶é—´ï¼‰
        pass
```

### ä½œä¸š2ï¼šç”¨é˜Ÿåˆ—å®ç°æ ˆ â­â­â­

ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—å®ç°æ ˆçš„åŠŸèƒ½ã€‚

```python
class StackUsingQueues:
    def __init__(self):
        # TODO: ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—
        pass
    
    def push(self, x):
        # TODO: å®ç°å‹æ ˆ
        pass
    
    def pop(self):
        # TODO: å®ç°å‡ºæ ˆ
        pass
```

### ä½œä¸š3ï¼šåè½¬é“¾è¡¨ â­â­â­

å®ç°é“¾è¡¨çš„åè½¬ï¼ˆè¿­ä»£å’Œé€’å½’ä¸¤ç§æ–¹æ³•ï¼‰ã€‚

```python
def reverse_list_iterative(head):
    # TODO: è¿­ä»£æ–¹æ³•åè½¬é“¾è¡¨
    pass

def reverse_list_recursive(head):
    # TODO: é€’å½’æ–¹æ³•åè½¬é“¾è¡¨
    pass
```

### ä½œä¸š4ï¼šéªŒè¯äºŒå‰æœç´¢æ ‘ â­â­â­â­

åˆ¤æ–­ä¸€æ£µäºŒå‰æ ‘æ˜¯å¦ä¸ºæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚

```python
def is_valid_bst(root):
    # TODO: éªŒè¯BST
    pass
```

### ä½œä¸š5ï¼šå®ç°LFUç¼“å­˜ â­â­â­â­â­

è®¾è®¡å¹¶å®ç°æœ€ä¸ç»å¸¸ä½¿ç”¨ï¼ˆLFUï¼‰ç¼“å­˜ã€‚

```python
class LFUCache:
    def __init__(self, capacity):
        # TODO: å®ç°åˆå§‹åŒ–
        pass
    
    def get(self, key):
        # TODO: è·å–å€¼å¹¶æ›´æ–°é¢‘ç‡
        pass
    
    def put(self, key, value):
        # TODO: æ’å…¥/æ›´æ–°å¹¶ç®¡ç†é¢‘ç‡
        pass
```

------

## ğŸ“ ä¸‹èŠ‚é¢„å‘Š

**ç¬¬å…­è¯¾ï¼šç®—æ³•è®¾è®¡ä¸ä¼˜åŒ–**

- æ’åºç®—æ³•è¯¦è§£
- æœç´¢ç®—æ³•
- åŠ¨æ€è§„åˆ’å…¥é—¨
- è´ªå¿ƒç®—æ³•
- åˆ†æ²»ç®—æ³•
- å›æº¯ç®—æ³•
- å®æˆ˜ï¼šè§£å†³ç»å…¸ç®—æ³•é—®é¢˜

------

## â“ å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

**Q1: ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ ˆï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨é˜Ÿåˆ—ï¼Ÿ**

A:

- **æ ˆ**ï¼šéœ€è¦åè¿›å…ˆå‡ºçš„åœºæ™¯ï¼ˆæ’¤é”€æ“ä½œã€æ‹¬å·åŒ¹é…ã€DFSï¼‰
- **é˜Ÿåˆ—**ï¼šéœ€è¦å…ˆè¿›å…ˆå‡ºçš„åœºæ™¯ï¼ˆBFSã€ä»»åŠ¡è°ƒåº¦ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰

**Q2: é“¾è¡¨å’Œæ•°ç»„å¦‚ä½•é€‰æ‹©ï¼Ÿ**

A:

- **æ•°ç»„**ï¼šéœ€è¦éšæœºè®¿é—®ã€å†…å­˜è¿ç»­
- **é“¾è¡¨**ï¼šé¢‘ç¹æ’å…¥åˆ é™¤ã€å¤§å°ä¸å›ºå®š

**Q3: ä¸ºä»€ä¹ˆBSTæŸ¥æ‰¾æ˜¯O(log n)ï¼Ÿ**

A: æ¯æ¬¡æ¯”è¾ƒå¯ä»¥æ’é™¤ä¸€åŠèŠ‚ç‚¹ï¼Œç±»ä¼¼äºŒåˆ†æŸ¥æ‰¾ã€‚ä½†å¦‚æœæ ‘ä¸å¹³è¡¡ï¼ˆé€€åŒ–æˆé“¾è¡¨ï¼‰ï¼Œæœ€åæƒ…å†µæ˜¯O(n)ã€‚

**Q4: å“ˆå¸Œè¡¨çš„è´Ÿè½½å› å­æ˜¯ä»€ä¹ˆï¼Ÿ**

A: è´Ÿè½½å› å­ = å…ƒç´ æ•°é‡ / æ¡¶æ•°é‡ã€‚é€šå¸¸ä¿æŒåœ¨0.7ä»¥ä¸‹ä»¥å‡å°‘å†²çªã€‚

**Q5: å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„ï¼Ÿ**

A: è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š

- æ“ä½œç±»å‹ï¼ˆæŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤ï¼‰
- æ“ä½œé¢‘ç‡
- æ•°æ®è§„æ¨¡
- å†…å­˜é™åˆ¶
- æ˜¯å¦éœ€è¦æœ‰åº

------

## ğŸ’» ç»ƒä¹ ç­”æ¡ˆæç¤º

### ä½œä¸š1æç¤ºï¼šMinStack

```python
class MinStack:
    def __init__(self):
        self.stack = []
        self.min_stack = []  # è¾…åŠ©æ ˆå­˜å‚¨æœ€å°å€¼
    
    def push(self, val):
        self.stack.append(val)
        if not self.min_stack or val <= self.min_stack[-1]:
            self.min_stack.append(val)
    
    def pop(self):
        val = self.stack.pop()
        if val == self.min_stack[-1]:
            self.min_stack.pop()
        return val
    
    def get_min(self):
        return self.min_stack[-1]
```

### ä½œä¸š3æç¤ºï¼šåè½¬é“¾è¡¨

```python
def reverse_list_iterative(head):
    prev = None
    current = head
    
    while current:
        next_node = current.next
        current.next = prev
        prev = current
        current = next_node
    
    return prev

def reverse_list_recursive(head):
    if not head or not head.next:
        return head
    
    new_head = reverse_list_recursive(head.next)
    head.next.next = head
    head.next = None
    
    return new_head
```

------

**æ­å–œä½ å®Œæˆç¬¬äº”è¯¾ï¼** ğŸ‰

æ•°æ®ç»“æ„æ˜¯ç¼–ç¨‹çš„åŸºç¡€ï¼ŒæŒæ¡å®ƒä»¬å°†å¤§å¤§æå‡ä½ çš„ç¼–ç¨‹èƒ½åŠ›ã€‚ç»§ç»­ç»ƒä¹ ï¼Œå¤šåšé¢˜ç›®ï¼Œä½ ä¼šè¶Šæ¥è¶Šç†Ÿç»ƒï¼

**è®°ä½ï¼šæ•°æ®ç»“æ„ + ç®—æ³• = ç¨‹åºï¼** ğŸ’ª

------

*è¯¾ç¨‹ç»“æŸæ—¶é—´ï¼šé¢„è®¡200åˆ†é’Ÿ*
 *å»ºè®®åˆ†2-3æ¬¡å­¦ä¹ ï¼Œæ¯æ¬¡ä¸“æ³¨1-2ä¸ªæ•°æ®ç»“æ„*